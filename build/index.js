var qn=Object.create;var pr=Object.defineProperty;var Un=Object.getOwnPropertyDescriptor;var Vn=Object.getOwnPropertyNames;var Mn=Object.getPrototypeOf,kn=Object.prototype.hasOwnProperty;var U=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Hn=(a,e)=>{for(var t in e)pr(a,t,{get:e[t],enumerable:!0})},Ua=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Vn(e))!kn.call(a,r)&&r!==t&&pr(a,r,{get:()=>e[r],enumerable:!(s=Un(e,r))||s.enumerable});return a};var kr=(a,e,t)=>(t=a!=null?qn(Mn(a)):{},Ua(e||!a||!a.__esModule?pr(t,"default",{value:a,enumerable:!0}):t,a)),Qn=a=>Ua(pr({},"__esModule",{value:!0}),a);var gr=U((Ka,Ga)=>{"use strict";function Yn(a){if(a.length===0)return;let e=Object.create(null),t=0;for(;t<a.length;++t){let h=a.charCodeAt(t);if(He[h]!==1){if(h!==47||t===0)return;break}}if(t===a.length)return;let s=a.slice(0,t).toLowerCase(),r=++t;for(;t<a.length;++t){let h=a.charCodeAt(t);if(He[h]!==1){if(t===r||Xn(a,t,e)===void 0)return;break}}if(t===r)return;let n=a.slice(r,t).toLowerCase();return{type:s,subtype:n,params:e}}function Xn(a,e,t){for(;e<a.length;){for(;e<a.length;++e){let o=a.charCodeAt(e);if(o!==32&&o!==9)break}if(e===a.length)break;if(a.charCodeAt(e++)!==59)return;for(;e<a.length;++e){let o=a.charCodeAt(e);if(o!==32&&o!==9)break}if(e===a.length)return;let s,r=e;for(;e<a.length;++e){let o=a.charCodeAt(e);if(He[o]!==1){if(o!==61)return;break}}if(e===a.length||(s=a.slice(r,e),++e,e===a.length))return;let n="",h;if(a.charCodeAt(e)===34){h=++e;let o=!1;for(;e<a.length;++e){let E=a.charCodeAt(e);if(E===92){o?(h=e,o=!1):(n+=a.slice(h,e),o=!0);continue}if(E===34){if(o){h=e,o=!1;continue}n+=a.slice(h,e);break}if(o&&(h=e-1,o=!1),Ba[E]!==1)return}if(e===a.length)return;++e}else{for(h=e;e<a.length;++e){let o=a.charCodeAt(e);if(He[o]!==1){if(e===h)return;break}}n=a.slice(h,e)}s=s.toLowerCase(),t[s]===void 0&&(t[s]=n)}return t}function Zn(a,e){if(a.length===0)return;let t=Object.create(null),s=0;for(;s<a.length;++s){let n=a.charCodeAt(s);if(He[n]!==1){if(ei(a,s,t,e)===void 0)return;break}}return{type:a.slice(0,s).toLowerCase(),params:t}}function ei(a,e,t,s){for(;e<a.length;){for(;e<a.length;++e){let P=a.charCodeAt(e);if(P!==32&&P!==9)break}if(e===a.length)break;if(a.charCodeAt(e++)!==59)return;for(;e<a.length;++e){let P=a.charCodeAt(e);if(P!==32&&P!==9)break}if(e===a.length)return;let r,n=e;for(;e<a.length;++e){let P=a.charCodeAt(e);if(He[P]!==1){if(P===61)break;return}}if(e===a.length)return;let h="",o,E;if(r=a.slice(n,e),r.charCodeAt(r.length-1)===42){let P=++e;for(;e<a.length;++e){let m=a.charCodeAt(e);if(ai[m]!==1){if(m!==39)return;break}}if(e===a.length)return;for(E=a.slice(P,e),++e;e<a.length&&a.charCodeAt(e)!==39;++e);if(e===a.length||(++e,e===a.length))return;o=e;let v=0;for(;e<a.length;++e){let m=a.charCodeAt(e);if(ti[m]!==1){if(m===37){let y,u;if(e+2<a.length&&(y=ka[a.charCodeAt(e+1)])!==-1&&(u=ka[a.charCodeAt(e+2)])!==-1){let p=(y<<4)+u;h+=a.slice(o,e),h+=String.fromCharCode(p),e+=2,o=e+1,p>=128?v=2:v===0&&(v=1);continue}return}break}}if(h+=a.slice(o,e),h=Qa(h,E,v),h===void 0)return}else{if(++e,e===a.length)return;if(a.charCodeAt(e)===34){o=++e;let P=!1;for(;e<a.length;++e){let v=a.charCodeAt(e);if(v===92){P?(o=e,P=!1):(h+=a.slice(o,e),P=!0);continue}if(v===34){if(P){o=e,P=!1;continue}h+=a.slice(o,e);break}if(P&&(o=e-1,P=!1),Ba[v]!==1)return}if(e===a.length)return;++e}else{for(o=e;e<a.length;++e){let P=a.charCodeAt(e);if(He[P]!==1){if(e===o)return;break}}h=a.slice(o,e)}if(h=s(h,2),h===void 0)return}r=r.toLowerCase(),t[r]===void 0&&(t[r]=h)}return t}function Ha(a){let e;for(;;)switch(a){case"utf-8":case"utf8":return fr.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return fr.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return fr.utf16le;case"base64":return fr.base64;default:if(e===void 0){e=!0,a=a.toLowerCase();continue}return fr.other.bind(a)}}var fr={utf8:(a,e)=>{if(a.length===0)return"";if(typeof a=="string"){if(e<2)return a;a=Buffer.from(a,"latin1")}return a.utf8Slice(0,a.length)},latin1:(a,e)=>a.length===0?"":typeof a=="string"?a:a.latin1Slice(0,a.length),utf16le:(a,e)=>a.length===0?"":(typeof a=="string"&&(a=Buffer.from(a,"latin1")),a.ucs2Slice(0,a.length)),base64:(a,e)=>a.length===0?"":(typeof a=="string"&&(a=Buffer.from(a,"latin1")),a.base64Slice(0,a.length)),other:(a,e)=>{if(a.length===0)return"";typeof a=="string"&&(a=Buffer.from(a,"latin1"));try{return new TextDecoder(Ka).decode(a)}catch{}}};function Qa(a,e,t){let s=Ha(e);if(s)return s(a,t)}function ri(a){if(typeof a!="string")return"";for(let e=a.length-1;e>=0;--e)switch(a.charCodeAt(e)){case 47:case 92:return a=a.slice(e+1),a===".."||a==="."?"":a}return a===".."||a==="."?"":a}var He=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ba=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],ai=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ti=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ka=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Ga.exports={basename:ri,convertToUTF8:Qa,getDecoder:Ha,parseContentType:Yn,parseDisposition:Zn}});var Xa=U((Cl,Ya)=>{"use strict";function Ja(a,e,t,s,r){for(let n=0;n<r;++n)if(a[e+n]!==t[s+n])return!1;return!0}var Gr=class{constructor(e,t){if(typeof t!="function")throw new Error("Missing match callback");if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw new Error(`Expected Buffer for needle, got ${typeof e}`);let s=e.length;if(this.maxMatches=1/0,this.matches=0,this._cb=t,this._lookbehindSize=0,this._needle=e,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(s),this._occ=[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s],s>1)for(let r=0;r<s-1;++r)this._occ[e[r]]=s-1-r}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(e,t){let s;Buffer.isBuffer(e)||(e=Buffer.from(e,"latin1"));let r=e.length;for(this._bufPos=t||0;s!==r&&this.matches<this.maxMatches;)s=si(this,e);return s}destroy(){let e=this._lookbehindSize;e&&this._cb(!1,this._lookbehind,0,e,!1),this.reset()}};function si(a,e){let t=e.length,s=a._needle,r=s.length,n=-a._lookbehindSize,h=r-1,o=s[h],E=t-r,P=a._occ,v=a._lookbehind;if(n<0){for(;n<0&&n<=E;){let y=n+h,u=y<0?v[a._lookbehindSize+y]:e[y];if(u===o&&Wa(a,e,n,h))return a._lookbehindSize=0,++a.matches,n>-a._lookbehindSize?a._cb(!0,v,0,a._lookbehindSize+n,!1):a._cb(!0,void 0,0,0,!0),a._bufPos=n+r;n+=P[u]}for(;n<0&&!Wa(a,e,n,t-n);)++n;if(n<0){let y=a._lookbehindSize+n;return y>0&&a._cb(!1,v,0,y,!1),a._lookbehindSize-=y,v.copy(v,0,y,a._lookbehindSize),v.set(e,a._lookbehindSize),a._lookbehindSize+=t,a._bufPos=t,t}a._cb(!1,v,0,a._lookbehindSize,!1),a._lookbehindSize=0}n+=a._bufPos;let m=s[0];for(;n<=E;){let y=e[n+h];if(y===o&&e[n]===m&&Ja(s,0,e,n,h))return++a.matches,n>0?a._cb(!0,e,a._bufPos,n,!0):a._cb(!0,void 0,0,0,!0),a._bufPos=n+r;n+=P[y]}for(;n<t;){if(e[n]!==m||!Ja(e,n,s,0,t-n)){++n;continue}e.copy(v,0,n,t),a._lookbehindSize=t-n;break}return n>0&&a._cb(!1,e,a._bufPos,n<t?n:t,!0),a._bufPos=t,t}function Wa(a,e,t,s){let r=a._lookbehind,n=a._lookbehindSize,h=a._needle;for(let o=0;o<s;++o,++t)if((t<0?r[n+t]:e[t])!==h[o])return!1;return!0}Ya.exports=Gr});var ot=U((Al,it)=>{"use strict";var{Readable:ni,Writable:ii}=require("stream"),oi=Xa(),{basename:li,convertToUTF8:Za,getDecoder:ui,parseContentType:fi,parseDisposition:hi}=gr(),ci=Buffer.from(`\r
`),di=Buffer.from("\r"),vi=Buffer.from("-");function et(){}var mi=2e3,er=16*1024,yr=0,rt=1,at=2,Jr=class{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=yr,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=yr,this.name="",this.value="",this.crlf=0}push(e,t,s){let r=t;for(;t<s;)switch(this.state){case yr:{let n=!1;for(;t<s;++t){if(this.byteCount===er)return-1;++this.byteCount;let h=e[t];if(yi[h]!==1){if(h!==58||(this.name+=e.latin1Slice(r,t),this.name.length===0))return-1;++t,n=!0,this.state=rt;break}}if(!n){this.name+=e.latin1Slice(r,t);break}}case rt:{let n=!1;for(;t<s;++t){if(this.byteCount===er)return-1;++this.byteCount;let h=e[t];if(h!==32&&h!==9){r=t,n=!0,this.state=at;break}}if(!n)break}case at:switch(this.crlf){case 0:for(;t<s;++t){if(this.byteCount===er)return-1;++this.byteCount;let n=e[t];if(Pi[n]!==1){if(n!==13)return-1;++this.crlf;break}}this.value+=e.latin1Slice(r,t++);break;case 1:if(this.byteCount===er||(++this.byteCount,e[t++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===er)return-1;++this.byteCount;let n=e[t];n===32||n===9?(r=t,this.crlf=0):(++this.pairCount<mi&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),n===13?(++this.crlf,++t):(r=t,this.crlf=0,this.state=yr,this.name="",this.value=""));break}case 3:{if(this.byteCount===er||(++this.byteCount,e[t++]!==10))return-1;let n=this.header;return this.reset(),this.cb(n),t}}break}return t}},Wr=class extends ni{constructor(e,t){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--t._fileEndsLeft===0&&t._finalcb){let s=t._finalcb;t._finalcb=null,process.nextTick(s)}})}_read(e){let t=this._readcb;t&&(this._readcb=null,t())}},tt={push:(a,e)=>{},destroy:()=>{}};function pi(a,e){let t=a._writecb;a._writecb=null,e?a.destroy(e):t&&t()}function gi(a,e){return a}var Yr=class extends ii{constructor(e){let t={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};if(super(t),!e.conType.params||typeof e.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let s=e.conType.params.boundary,r=typeof e.defParamCharset=="string"&&e.defParamCharset?ui(e.defParamCharset):gi,n=e.defCharset||"utf8",h=e.preservePath,o={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.fileHwm=="number"?e.fileHwm:void 0},E=e.limits,P=E&&typeof E.fieldSize=="number"?E.fieldSize:1*1024*1024,v=E&&typeof E.fileSize=="number"?E.fileSize:1/0,m=E&&typeof E.files=="number"?E.files:1/0,y=E&&typeof E.fields=="number"?E.fields:1/0,u=E&&typeof E.parts=="number"?E.parts:1/0,p=-1,l=0,i=0,d=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let b=0,_,R=0,$,D,L,j,A=!1,q=!1,z=!1;this._hparser=null;let N=new Jr(x=>{this._hparser=null,d=!1,L="text/plain",$=n,D="7bit",j=void 0,A=!1;let M;if(!x["content-disposition"]){d=!0;return}let I=hi(x["content-disposition"][0],r);if(!I||I.type!=="form-data"){d=!0;return}if(I.params&&(I.params.name&&(j=I.params.name),I.params["filename*"]?M=I.params["filename*"]:I.params.filename&&(M=I.params.filename),M!==void 0&&!h&&(M=li(M))),x["content-type"]){let V=fi(x["content-type"][0]);V&&(L=`${V.type}/${V.subtype}`,V.params&&typeof V.params.charset=="string"&&($=V.params.charset.toLowerCase()))}if(x["content-transfer-encoding"]&&(D=x["content-transfer-encoding"][0].toLowerCase()),L==="application/octet-stream"||M!==void 0){if(i===m){q||(q=!0,this.emit("filesLimit")),d=!0;return}if(++i,this.listenerCount("file")===0){d=!0;return}b=0,this._fileStream=new Wr(o,this),++this._fileEndsLeft,this.emit("file",j,this._fileStream,{filename:M,encoding:D,mimeType:L})}else{if(l===y){z||(z=!0,this.emit("fieldsLimit")),d=!0;return}if(++l,this.listenerCount("field")===0){d=!0;return}_=[],R=0}}),C=0,O=(x,M,I,V,k)=>{e:for(;M;){if(this._hparser!==null){let F=this._hparser.push(M,I,V);if(F===-1){this._hparser=null,N.reset(),this.emit("error",new Error("Malformed part header"));break}I=F}if(I===V)break;if(C!==0){if(C===1){switch(M[I]){case 45:C=2,++I;break;case 13:C=3,++I;break;default:C=0}if(I===V)return}if(C===2){if(C=0,M[I]===45){this._complete=!0,this._bparser=tt;return}let F=this._writecb;this._writecb=et,O(!1,vi,0,1,!1),this._writecb=F}else if(C===3)if(C=0,M[I]===10){if(++I,p>=u||(this._hparser=N,I===V))break;continue e}else{let F=this._writecb;this._writecb=et,O(!1,di,0,1,!1),this._writecb=F}}if(!d){if(this._fileStream){let F,J=Math.min(V-I,v-b);k?F=M.slice(I,I+J):(F=Buffer.allocUnsafe(J),M.copy(F,0,I,I+J)),b+=F.length,b===v?(F.length>0&&this._fileStream.push(F),this._fileStream.emit("limit"),this._fileStream.truncated=!0,d=!0):this._fileStream.push(F)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(_!==void 0){let F,J=Math.min(V-I,P-R);k?F=M.slice(I,I+J):(F=Buffer.allocUnsafe(J),M.copy(F,0,I,I+J)),R+=J,_.push(F),R===P&&(d=!0,A=!0)}}break}if(x){if(C=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(_!==void 0){let F;switch(_.length){case 0:F="";break;case 1:F=Za(_[0],$,0);break;default:F=Za(Buffer.concat(_,R),$,0)}_=void 0,R=0,this.emit("field",j,F,{nameTruncated:!1,valueTruncated:A,encoding:D,mimeType:L})}++p===u&&this.emit("partsLimit")}};this._bparser=new oi(`\r
--${s}`,O),this._writecb=null,this._finalcb=null,this.write(ci)}static detect(e){return e.type==="multipart"&&e.subtype==="form-data"}_write(e,t,s){this._writecb=s,this._bparser.push(e,0),this._writecb&&pi(this)}_destroy(e,t){this._hparser=null,this._bparser=tt,e||(e=nt(this));let s=this._fileStream;s&&(this._fileStream=null,s.destroy(e)),t(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=st.bind(null,this,e):st(this,e)}};function st(a,e,t){if(t)return e(t);t=nt(a),e(t)}function nt(a){if(a._hparser)return new Error("Malformed part header");let e=a._fileStream;if(e&&(a._fileStream=null,e.destroy(new Error("Unexpected end of file"))),!a._complete)return new Error("Unexpected end of form")}var yi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pi=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];it.exports=Yr});var ut=U((Ol,lt)=>{"use strict";var{Writable:Ei}=require("stream"),{getDecoder:_i}=gr(),aa=class extends Ei{constructor(e){let t={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};super(t);let s=e.defCharset||"utf8";e.conType.params&&typeof e.conType.params.charset=="string"&&(s=e.conType.params.charset),this.charset=s;let r=e.limits;this.fieldSizeLimit=r&&typeof r.fieldSize=="number"?r.fieldSize:1*1024*1024,this.fieldsLimit=r&&typeof r.fields=="number"?r.fields:1/0,this.fieldNameSizeLimit=r&&typeof r.fieldNameSize=="number"?r.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=_i(s)}static detect(e){return e.type==="application"&&e.subtype==="x-www-form-urlencoded"}_write(e,t,s){if(this._fields>=this.fieldsLimit)return s();let r=0,n=e.length;if(this._lastPos=0,this._byte!==-2){if(r=Xr(this,e,r,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;r<n;)if(this._inKey){for(r=Zr(this,e,r,n);r<n;){switch(e[r]){case 61:this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),s();continue;case 43:this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._key+=" ",this._lastPos=r+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=r+1,this._byte=-1,r=Xr(this,e,r+1,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();++this._bytesKey,r=Zr(this,e,r,n);continue}++r,++this._bytesKey,r=Zr(this,e,r,n)}this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r))}else{for(r=ea(this,e,r,n);r<n;){switch(e[r]){case 38:if(this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),s();continue e;case 43:this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._val+=" ",this._lastPos=r+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._lastPos=r+1,this._byte=-1,r=Xr(this,e,r+1,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();++this._bytesVal,r=ea(this,e,r,n);continue}++r,++this._bytesVal,r=ea(this,e,r,n)}this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r))}s()}_final(e){if(this._byte!==-2)return e(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}};function Xr(a,e,t,s){if(t>=s)return s;if(a._byte===-1){let r=ra[e[t++]];if(r===-1)return-1;if(r>=8&&(a._encode=2),t<s){let n=ra[e[t++]];if(n===-1)return-1;a._inKey?a._key+=String.fromCharCode((r<<4)+n):a._val+=String.fromCharCode((r<<4)+n),a._byte=-2,a._lastPos=t}else a._byte=r}else{let r=ra[e[t++]];if(r===-1)return-1;a._inKey?a._key+=String.fromCharCode((a._byte<<4)+r):a._val+=String.fromCharCode((a._byte<<4)+r),a._byte=-2,a._lastPos=t}return t}function Zr(a,e,t,s){if(a._bytesKey>a.fieldNameSizeLimit){for(a._keyTrunc||a._lastPos<t&&(a._key+=e.latin1Slice(a._lastPos,t-1)),a._keyTrunc=!0;t<s;++t){let r=e[t];if(r===61||r===38)break;++a._bytesKey}a._lastPos=t}return t}function ea(a,e,t,s){if(a._bytesVal>a.fieldSizeLimit){for(a._valTrunc||a._lastPos<t&&(a._val+=e.latin1Slice(a._lastPos,t-1)),a._valTrunc=!0;t<s&&e[t]!==38;++t)++a._bytesVal;a._lastPos=t}return t}var ra=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];lt.exports=aa});var ht=U((Fl,ft)=>{"use strict";var{parseContentType:bi}=gr();function Si(a){let e=a.headers,t=bi(e["content-type"]);if(!t)throw new Error("Malformed content type");for(let s of wi){if(!s.detect(t))continue;let n={limits:a.limits,headers:e,conType:t,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return a.highWaterMark&&(n.highWaterMark=a.highWaterMark),a.fileHwm&&(n.fileHwm=a.fileHwm),n.defCharset=a.defCharset,n.defParamCharset=a.defParamCharset,n.preservePath=a.preservePath,new s(n)}throw new Error(`Unsupported content type: ${e["content-type"]}`)}var wi=[ot(),ut()].filter(function(a){return typeof a.detect=="function"});ft.exports=a=>{if((typeof a!="object"||a===null)&&(a={}),typeof a.headers!="object"||a.headers===null||typeof a.headers["content-type"]!="string")throw new Error("Missing Content-Type");return Si(a)}});var vt=U((Pr,dt)=>{(function(a,e){typeof Pr=="object"&&typeof dt<"u"?e(Pr):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Pr,function(a){"use strict";function e(){for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];if(f.length>1){f[0]=f[0].slice(0,-1);for(var S=f.length-1,w=1;w<S;++w)f[w]=f[w].slice(1,-1);return f[S]=f[S].slice(1),f.join("")}else return f[0]}function t(c){return"(?:"+c+")"}function s(c){return c===void 0?"undefined":c===null?"null":Object.prototype.toString.call(c).split(" ").pop().split("]").shift().toLowerCase()}function r(c){return c.toUpperCase()}function n(c){return c!=null?c instanceof Array?c:typeof c.length!="number"||c.split||c.setInterval||c.call?[c]:Array.prototype.slice.call(c):[]}function h(c,f){var g=c;if(f)for(var S in f)g[S]=f[S];return g}function o(c){var f="[A-Za-z]",g="[\\x0D]",S="[0-9]",w="[\\x22]",T=e(S,"[A-Fa-f]"),H="[\\x0A]",B="[\\x20]",Y=t(t("%[EFef]"+T+"%"+T+T+"%"+T+T)+"|"+t("%[89A-Fa-f]"+T+"%"+T+T)+"|"+t("%"+T+T)),oe="[\\:\\/\\?\\#\\[\\]\\@]",Q="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",re=e(oe,Q),le=c?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ee=c?"[\\uE000-\\uF8FF]":"[]",G=e(f,S,"[\\-\\.\\_\\~]",le),ae=t(f+e(f,S,"[\\+\\-\\.]")+"*"),X=t(t(Y+"|"+e(G,Q,"[\\:]"))+"*"),Ve=t(t("25[0-5]")+"|"+t("2[0-4]"+S)+"|"+t("1"+S+S)+"|"+t("[1-9]"+S)+"|"+S),ye=t(t("25[0-5]")+"|"+t("2[0-4]"+S)+"|"+t("1"+S+S)+"|"+t("0?[1-9]"+S)+"|0?0?"+S),be=t(ye+"\\."+ye+"\\."+ye+"\\."+ye),Z=t(T+"{1,4}"),Pe=t(t(Z+"\\:"+Z)+"|"+be),Se=t(t(Z+"\\:")+"{6}"+Pe),De=t("\\:\\:"+t(Z+"\\:")+"{5}"+Pe),Me=t(t(Z)+"?\\:\\:"+t(Z+"\\:")+"{4}"+Pe),Oe=t(t(t(Z+"\\:")+"{0,1}"+Z)+"?\\:\\:"+t(Z+"\\:")+"{3}"+Pe),tr=t(t(t(Z+"\\:")+"{0,2}"+Z)+"?\\:\\:"+t(Z+"\\:")+"{2}"+Pe),dr=t(t(t(Z+"\\:")+"{0,3}"+Z)+"?\\:\\:"+Z+"\\:"+Pe),vr=t(t(t(Z+"\\:")+"{0,4}"+Z)+"?\\:\\:"+Pe),Ge=t(t(t(Z+"\\:")+"{0,5}"+Z)+"?\\:\\:"+Z),Je=t(t(t(Z+"\\:")+"{0,6}"+Z)+"?\\:\\:"),Fe=t([Se,De,Me,Oe,tr,dr,vr,Ge,Je].join("|")),We=t(t(G+"|"+Y)+"+"),Vr=t(Fe+"\\%25"+We),ke=t(Fe+t("\\%25|\\%(?!"+T+"{2})")+We),xn=t("[vV]"+T+"+\\."+e(G,Q,"[\\:]")+"+"),In=t("\\["+t(ke+"|"+Fe+"|"+xn)+"\\]"),Na=t(t(Y+"|"+e(G,Q))+"*"),sr=t(In+"|"+be+"(?!"+Na+")|"+Na),nr=t(S+"*"),ja=t(t(X+"@")+"?"+sr+t("\\:"+nr)+"?"),ir=t(Y+"|"+e(G,Q,"[\\:\\@]")),Tn=t(ir+"*"),za=t(ir+"+"),Ln=t(t(Y+"|"+e(G,Q,"[\\@]"))+"+"),xe=t(t("\\/"+Tn)+"*"),Ye=t("\\/"+t(za+xe)+"?"),Mr=t(Ln+xe),mr=t(za+xe),Xe="(?!"+ir+")",hl=t(xe+"|"+Ye+"|"+Mr+"|"+mr+"|"+Xe),Ze=t(t(ir+"|"+e("[\\/\\?]",ee))+"*"),or=t(t(ir+"|[\\/\\?]")+"*"),qa=t(t("\\/\\/"+ja+xe)+"|"+Ye+"|"+mr+"|"+Xe),Nn=t(ae+"\\:"+qa+t("\\?"+Ze)+"?"+t("\\#"+or)+"?"),jn=t(t("\\/\\/"+ja+xe)+"|"+Ye+"|"+Mr+"|"+Xe),zn=t(jn+t("\\?"+Ze)+"?"+t("\\#"+or)+"?"),cl=t(Nn+"|"+zn),dl=t(ae+"\\:"+qa+t("\\?"+Ze)+"?"),vl="^("+ae+")\\:"+t(t("\\/\\/("+t("("+X+")@")+"?("+sr+")"+t("\\:("+nr+")")+"?)")+"?("+xe+"|"+Ye+"|"+mr+"|"+Xe+")")+t("\\?("+Ze+")")+"?"+t("\\#("+or+")")+"?$",ml="^(){0}"+t(t("\\/\\/("+t("("+X+")@")+"?("+sr+")"+t("\\:("+nr+")")+"?)")+"?("+xe+"|"+Ye+"|"+Mr+"|"+Xe+")")+t("\\?("+Ze+")")+"?"+t("\\#("+or+")")+"?$",pl="^("+ae+")\\:"+t(t("\\/\\/("+t("("+X+")@")+"?("+sr+")"+t("\\:("+nr+")")+"?)")+"?("+xe+"|"+Ye+"|"+mr+"|"+Xe+")")+t("\\?("+Ze+")")+"?$",gl="^"+t("\\#("+or+")")+"?$",yl="^"+t("("+X+")@")+"?("+sr+")"+t("\\:("+nr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",f,S,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",G,Q),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",G,Q),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",G,Q),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",G,Q),"g"),NOT_QUERY:new RegExp(e("[^\\%]",G,Q,"[\\:\\@\\/\\?]",ee),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",G,Q,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",G,Q),"g"),UNRESERVED:new RegExp(G,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",G,re),"g"),PCT_ENCODED:new RegExp(Y,"g"),IPV4ADDRESS:new RegExp("^("+be+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Fe+")"+t(t("\\%25|\\%(?!"+T+"{2})")+"("+We+")")+"?\\]?$")}}var E=o(!1),P=o(!0),v=function(){function c(f,g){var S=[],w=!0,T=!1,H=void 0;try{for(var B=f[Symbol.iterator](),Y;!(w=(Y=B.next()).done)&&(S.push(Y.value),!(g&&S.length===g));w=!0);}catch(oe){T=!0,H=oe}finally{try{!w&&B.return&&B.return()}finally{if(T)throw H}}return S}return function(f,g){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return c(f,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(c){if(Array.isArray(c)){for(var f=0,g=Array(c.length);f<c.length;f++)g[f]=c[f];return g}else return Array.from(c)},y=2147483647,u=36,p=1,l=26,i=38,d=700,b=72,_=128,R="-",$=/^xn--/,D=/[^\0-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=u-p,q=Math.floor,z=String.fromCharCode;function N(c){throw new RangeError(j[c])}function C(c,f){for(var g=[],S=c.length;S--;)g[S]=f(c[S]);return g}function O(c,f){var g=c.split("@"),S="";g.length>1&&(S=g[0]+"@",c=g[1]),c=c.replace(L,".");var w=c.split("."),T=C(w,f).join(".");return S+T}function x(c){for(var f=[],g=0,S=c.length;g<S;){var w=c.charCodeAt(g++);if(w>=55296&&w<=56319&&g<S){var T=c.charCodeAt(g++);(T&64512)==56320?f.push(((w&1023)<<10)+(T&1023)+65536):(f.push(w),g--)}else f.push(w)}return f}var M=function(f){return String.fromCodePoint.apply(String,m(f))},I=function(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u},V=function(f,g){return f+22+75*(f<26)-((g!=0)<<5)},k=function(f,g,S){var w=0;for(f=S?q(f/d):f>>1,f+=q(f/g);f>A*l>>1;w+=u)f=q(f/A);return q(w+(A+1)*f/(f+i))},F=function(f){var g=[],S=f.length,w=0,T=_,H=b,B=f.lastIndexOf(R);B<0&&(B=0);for(var Y=0;Y<B;++Y)f.charCodeAt(Y)>=128&&N("not-basic"),g.push(f.charCodeAt(Y));for(var oe=B>0?B+1:0;oe<S;){for(var Q=w,re=1,le=u;;le+=u){oe>=S&&N("invalid-input");var ee=I(f.charCodeAt(oe++));(ee>=u||ee>q((y-w)/re))&&N("overflow"),w+=ee*re;var G=le<=H?p:le>=H+l?l:le-H;if(ee<G)break;var ae=u-G;re>q(y/ae)&&N("overflow"),re*=ae}var X=g.length+1;H=k(w-Q,X,Q==0),q(w/X)>y-T&&N("overflow"),T+=q(w/X),w%=X,g.splice(w++,0,T)}return String.fromCodePoint.apply(String,g)},J=function(f){var g=[];f=x(f);var S=f.length,w=_,T=0,H=b,B=!0,Y=!1,oe=void 0;try{for(var Q=f[Symbol.iterator](),re;!(B=(re=Q.next()).done);B=!0){var le=re.value;le<128&&g.push(z(le))}}catch(ke){Y=!0,oe=ke}finally{try{!B&&Q.return&&Q.return()}finally{if(Y)throw oe}}var ee=g.length,G=ee;for(ee&&g.push(R);G<S;){var ae=y,X=!0,Ve=!1,ye=void 0;try{for(var be=f[Symbol.iterator](),Z;!(X=(Z=be.next()).done);X=!0){var Pe=Z.value;Pe>=w&&Pe<ae&&(ae=Pe)}}catch(ke){Ve=!0,ye=ke}finally{try{!X&&be.return&&be.return()}finally{if(Ve)throw ye}}var Se=G+1;ae-w>q((y-T)/Se)&&N("overflow"),T+=(ae-w)*Se,w=ae;var De=!0,Me=!1,Oe=void 0;try{for(var tr=f[Symbol.iterator](),dr;!(De=(dr=tr.next()).done);De=!0){var vr=dr.value;if(vr<w&&++T>y&&N("overflow"),vr==w){for(var Ge=T,Je=u;;Je+=u){var Fe=Je<=H?p:Je>=H+l?l:Je-H;if(Ge<Fe)break;var We=Ge-Fe,Vr=u-Fe;g.push(z(V(Fe+We%Vr,0))),Ge=q(We/Vr)}g.push(z(V(Ge,0))),H=k(T,Se,G==ee),T=0,++G}}}catch(ke){Me=!0,Oe=ke}finally{try{!De&&tr.return&&tr.return()}finally{if(Me)throw Oe}}++T,++w}return g.join("")},he=function(f){return O(f,function(g){return $.test(g)?F(g.slice(4).toLowerCase()):g})},de=function(f){return O(f,function(g){return D.test(g)?"xn--"+J(g):g})},K={version:"2.1.0",ucs2:{decode:x,encode:M},decode:F,encode:J,toASCII:de,toUnicode:he},ne={};function ue(c){var f=c.charCodeAt(0),g=void 0;return f<16?g="%0"+f.toString(16).toUpperCase():f<128?g="%"+f.toString(16).toUpperCase():f<2048?g="%"+(f>>6|192).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase():g="%"+(f>>12|224).toString(16).toUpperCase()+"%"+(f>>6&63|128).toString(16).toUpperCase()+"%"+(f&63|128).toString(16).toUpperCase(),g}function ve(c){for(var f="",g=0,S=c.length;g<S;){var w=parseInt(c.substr(g+1,2),16);if(w<128)f+=String.fromCharCode(w),g+=3;else if(w>=194&&w<224){if(S-g>=6){var T=parseInt(c.substr(g+4,2),16);f+=String.fromCharCode((w&31)<<6|T&63)}else f+=c.substr(g,6);g+=6}else if(w>=224){if(S-g>=9){var H=parseInt(c.substr(g+4,2),16),B=parseInt(c.substr(g+7,2),16);f+=String.fromCharCode((w&15)<<12|(H&63)<<6|B&63)}else f+=c.substr(g,9);g+=9}else f+=c.substr(g,3),g+=3}return f}function Ie(c,f){function g(S){var w=ve(S);return w.match(f.UNRESERVED)?w:S}return c.scheme&&(c.scheme=String(c.scheme).replace(f.PCT_ENCODED,g).toLowerCase().replace(f.NOT_SCHEME,"")),c.userinfo!==void 0&&(c.userinfo=String(c.userinfo).replace(f.PCT_ENCODED,g).replace(f.NOT_USERINFO,ue).replace(f.PCT_ENCODED,r)),c.host!==void 0&&(c.host=String(c.host).replace(f.PCT_ENCODED,g).toLowerCase().replace(f.NOT_HOST,ue).replace(f.PCT_ENCODED,r)),c.path!==void 0&&(c.path=String(c.path).replace(f.PCT_ENCODED,g).replace(c.scheme?f.NOT_PATH:f.NOT_PATH_NOSCHEME,ue).replace(f.PCT_ENCODED,r)),c.query!==void 0&&(c.query=String(c.query).replace(f.PCT_ENCODED,g).replace(f.NOT_QUERY,ue).replace(f.PCT_ENCODED,r)),c.fragment!==void 0&&(c.fragment=String(c.fragment).replace(f.PCT_ENCODED,g).replace(f.NOT_FRAGMENT,ue).replace(f.PCT_ENCODED,r)),c}function Ce(c){return c.replace(/^0*(.*)/,"$1")||"0"}function ie(c,f){var g=c.match(f.IPV4ADDRESS)||[],S=v(g,2),w=S[1];return w?w.split(".").map(Ce).join("."):c}function te(c,f){var g=c.match(f.IPV6ADDRESS)||[],S=v(g,3),w=S[1],T=S[2];if(w){for(var H=w.toLowerCase().split("::").reverse(),B=v(H,2),Y=B[0],oe=B[1],Q=oe?oe.split(":").map(Ce):[],re=Y.split(":").map(Ce),le=f.IPV4ADDRESS.test(re[re.length-1]),ee=le?7:8,G=re.length-ee,ae=Array(ee),X=0;X<ee;++X)ae[X]=Q[X]||re[G+X]||"";le&&(ae[ee-1]=ie(ae[ee-1],f));var Ve=ae.reduce(function(Se,De,Me){if(!De||De==="0"){var Oe=Se[Se.length-1];Oe&&Oe.index+Oe.length===Me?Oe.length++:Se.push({index:Me,length:1})}return Se},[]),ye=Ve.sort(function(Se,De){return De.length-Se.length})[0],be=void 0;if(ye&&ye.length>1){var Z=ae.slice(0,ye.index),Pe=ae.slice(ye.index+ye.length);be=Z.join(":")+"::"+Pe.join(":")}else be=ae.join(":");return T&&(be+="%"+T),be}else return c}var ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ce="".match(/(){0}/)[1]===void 0;function W(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={},S=f.iri!==!1?P:E;f.reference==="suffix"&&(c=(f.scheme?f.scheme+":":"")+"//"+c);var w=c.match(ze);if(w){ce?(g.scheme=w[1],g.userinfo=w[3],g.host=w[4],g.port=parseInt(w[5],10),g.path=w[6]||"",g.query=w[7],g.fragment=w[8],isNaN(g.port)&&(g.port=w[5])):(g.scheme=w[1]||void 0,g.userinfo=c.indexOf("@")!==-1?w[3]:void 0,g.host=c.indexOf("//")!==-1?w[4]:void 0,g.port=parseInt(w[5],10),g.path=w[6]||"",g.query=c.indexOf("?")!==-1?w[7]:void 0,g.fragment=c.indexOf("#")!==-1?w[8]:void 0,isNaN(g.port)&&(g.port=c.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?w[4]:void 0)),g.host&&(g.host=te(ie(g.host,S),S)),g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&!g.path&&g.query===void 0?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",f.reference&&f.reference!=="suffix"&&f.reference!==g.reference&&(g.error=g.error||"URI is not a "+f.reference+" reference.");var T=ne[(f.scheme||g.scheme||"").toLowerCase()];if(!f.unicodeSupport&&(!T||!T.unicodeSupport)){if(g.host&&(f.domainHost||T&&T.domainHost))try{g.host=K.toASCII(g.host.replace(S.PCT_ENCODED,ve).toLowerCase())}catch(H){g.error=g.error||"Host's domain name can not be converted to ASCII via punycode: "+H}Ie(g,E)}else Ie(g,S);T&&T.parse&&T.parse(g,f)}else g.error=g.error||"URI can not be parsed.";return g}function Te(c,f){var g=f.iri!==!1?P:E,S=[];return c.userinfo!==void 0&&(S.push(c.userinfo),S.push("@")),c.host!==void 0&&S.push(te(ie(String(c.host),g),g).replace(g.IPV6ADDRESS,function(w,T,H){return"["+T+(H?"%25"+H:"")+"]"})),(typeof c.port=="number"||typeof c.port=="string")&&(S.push(":"),S.push(String(c.port))),S.length?S.join(""):void 0}var Ae=/^\.\.?\//,qe=/^\/\.(\/|$)/,Ue=/^\/\.\.(\/|$)/,fe=/^\/?(?:.|\n)*?(?=\/|$)/;function _e(c){for(var f=[];c.length;)if(c.match(Ae))c=c.replace(Ae,"");else if(c.match(qe))c=c.replace(qe,"/");else if(c.match(Ue))c=c.replace(Ue,"/"),f.pop();else if(c==="."||c==="..")c="";else{var g=c.match(fe);if(g){var S=g[0];c=c.slice(S.length),f.push(S)}else throw new Error("Unexpected dot segment condition")}return f.join("")}function pe(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=f.iri?P:E,S=[],w=ne[(f.scheme||c.scheme||"").toLowerCase()];if(w&&w.serialize&&w.serialize(c,f),c.host&&!g.IPV6ADDRESS.test(c.host)){if(f.domainHost||w&&w.domainHost)try{c.host=f.iri?K.toUnicode(c.host):K.toASCII(c.host.replace(g.PCT_ENCODED,ve).toLowerCase())}catch(B){c.error=c.error||"Host's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+B}}Ie(c,g),f.reference!=="suffix"&&c.scheme&&(S.push(c.scheme),S.push(":"));var T=Te(c,f);if(T!==void 0&&(f.reference!=="suffix"&&S.push("//"),S.push(T),c.path&&c.path.charAt(0)!=="/"&&S.push("/")),c.path!==void 0){var H=c.path;!f.absolutePath&&(!w||!w.absolutePath)&&(H=_e(H)),T===void 0&&(H=H.replace(/^\/\//,"/%2F")),S.push(H)}return c.query!==void 0&&(S.push("?"),S.push(c.query)),c.fragment!==void 0&&(S.push("#"),S.push(c.fragment)),S.join("")}function me(c,f){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=arguments[3],w={};return S||(c=W(pe(c,g),g),f=W(pe(f,g),g)),g=g||{},!g.tolerant&&f.scheme?(w.scheme=f.scheme,w.userinfo=f.userinfo,w.host=f.host,w.port=f.port,w.path=_e(f.path||""),w.query=f.query):(f.userinfo!==void 0||f.host!==void 0||f.port!==void 0?(w.userinfo=f.userinfo,w.host=f.host,w.port=f.port,w.path=_e(f.path||""),w.query=f.query):(f.path?(f.path.charAt(0)==="/"?w.path=_e(f.path):((c.userinfo!==void 0||c.host!==void 0||c.port!==void 0)&&!c.path?w.path="/"+f.path:c.path?w.path=c.path.slice(0,c.path.lastIndexOf("/")+1)+f.path:w.path=f.path,w.path=_e(w.path)),w.query=f.query):(w.path=c.path,f.query!==void 0?w.query=f.query:w.query=c.query),w.userinfo=c.userinfo,w.host=c.host,w.port=c.port),w.scheme=c.scheme),w.fragment=f.fragment,w}function Re(c,f,g){var S=h({scheme:"null"},g);return pe(me(W(c,S),W(f,S),S,!0),S)}function ge(c,f){return typeof c=="string"?c=pe(W(c,f),f):s(c)==="object"&&(c=W(pe(c,f),f)),c}function cr(c,f,g){return typeof c=="string"?c=pe(W(c,g),g):s(c)==="object"&&(c=pe(c,g)),typeof f=="string"?f=pe(W(f,g),g):s(f)==="object"&&(f=pe(f,g)),c===f}function qr(c,f){return c&&c.toString().replace(!f||!f.iri?E.ESCAPE:P.ESCAPE,ue)}function we(c,f){return c&&c.toString().replace(!f||!f.iri?E.PCT_ENCODED:P.PCT_ENCODED,ve)}var rr={scheme:"http",domainHost:!0,parse:function(f,g){return f.host||(f.error=f.error||"HTTP URIs must have a host."),f},serialize:function(f,g){var S=String(f.scheme).toLowerCase()==="https";return(f.port===(S?443:80)||f.port==="")&&(f.port=void 0),f.path||(f.path="/"),f}},Ca={scheme:"https",domainHost:rr.domainHost,parse:rr.parse,serialize:rr.serialize};function Aa(c){return typeof c.secure=="boolean"?c.secure:String(c.scheme).toLowerCase()==="wss"}var ar={scheme:"ws",domainHost:!0,parse:function(f,g){var S=f;return S.secure=Aa(S),S.resourceName=(S.path||"/")+(S.query?"?"+S.query:""),S.path=void 0,S.query=void 0,S},serialize:function(f,g){if((f.port===(Aa(f)?443:80)||f.port==="")&&(f.port=void 0),typeof f.secure=="boolean"&&(f.scheme=f.secure?"wss":"ws",f.secure=void 0),f.resourceName){var S=f.resourceName.split("?"),w=v(S,2),T=w[0],H=w[1];f.path=T&&T!=="/"?T:void 0,f.query=H,f.resourceName=void 0}return f.fragment=void 0,f}},Oa={scheme:"wss",domainHost:ar.domainHost,parse:ar.parse,serialize:ar.serialize},En={},_n=!0,Fa="[A-Za-z0-9\\-\\.\\_\\~"+(_n?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",$e="[0-9A-Fa-f]",bn=t(t("%[EFef]"+$e+"%"+$e+$e+"%"+$e+$e)+"|"+t("%[89A-Fa-f]"+$e+"%"+$e+$e)+"|"+t("%"+$e+$e)),Sn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",wn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Rn=e(wn,'[\\"\\\\]'),$n="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Dn=new RegExp(Fa,"g"),Ke=new RegExp(bn,"g"),Cn=new RegExp(e("[^]",Sn,"[\\.]",'[\\"]',Rn),"g"),xa=new RegExp(e("[^]",Fa,$n),"g"),An=xa;function Ur(c){var f=ve(c);return f.match(Dn)?f:c}var Ia={scheme:"mailto",parse:function(f,g){var S=f,w=S.to=S.path?S.path.split(","):[];if(S.path=void 0,S.query){for(var T=!1,H={},B=S.query.split("&"),Y=0,oe=B.length;Y<oe;++Y){var Q=B[Y].split("=");switch(Q[0]){case"to":for(var re=Q[1].split(","),le=0,ee=re.length;le<ee;++le)w.push(re[le]);break;case"subject":S.subject=we(Q[1],g);break;case"body":S.body=we(Q[1],g);break;default:T=!0,H[we(Q[0],g)]=we(Q[1],g);break}}T&&(S.headers=H)}S.query=void 0;for(var G=0,ae=w.length;G<ae;++G){var X=w[G].split("@");if(X[0]=we(X[0]),g.unicodeSupport)X[1]=we(X[1],g).toLowerCase();else try{X[1]=K.toASCII(we(X[1],g).toLowerCase())}catch(Ve){S.error=S.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ve}w[G]=X.join("@")}return S},serialize:function(f,g){var S=f,w=n(f.to);if(w){for(var T=0,H=w.length;T<H;++T){var B=String(w[T]),Y=B.lastIndexOf("@"),oe=B.slice(0,Y).replace(Ke,Ur).replace(Ke,r).replace(Cn,ue),Q=B.slice(Y+1);try{Q=g.iri?K.toUnicode(Q):K.toASCII(we(Q,g).toLowerCase())}catch(G){S.error=S.error||"Email address's domain name can not be converted to "+(g.iri?"Unicode":"ASCII")+" via punycode: "+G}w[T]=oe+"@"+Q}S.path=w.join(",")}var re=f.headers=f.headers||{};f.subject&&(re.subject=f.subject),f.body&&(re.body=f.body);var le=[];for(var ee in re)re[ee]!==En[ee]&&le.push(ee.replace(Ke,Ur).replace(Ke,r).replace(xa,ue)+"="+re[ee].replace(Ke,Ur).replace(Ke,r).replace(An,ue));return le.length&&(S.query=le.join("&")),S}},On=/^([^\:]+)\:(.*)/,Ta={scheme:"urn",parse:function(f,g){var S=f.path&&f.path.match(On),w=f;if(S){var T=g.scheme||w.scheme||"urn",H=S[1].toLowerCase(),B=S[2],Y=T+":"+(g.nid||H),oe=ne[Y];w.nid=H,w.nss=B,w.path=void 0,oe&&(w=oe.parse(w,g))}else w.error=w.error||"URN can not be parsed.";return w},serialize:function(f,g){var S=g.scheme||f.scheme||"urn",w=f.nid,T=S+":"+(g.nid||w),H=ne[T];H&&(f=H.serialize(f,g));var B=f,Y=f.nss;return B.path=(w||g.nid)+":"+Y,B}},Fn=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,La={scheme:"urn:uuid",parse:function(f,g){var S=f;return S.uuid=S.nss,S.nss=void 0,!g.tolerant&&(!S.uuid||!S.uuid.match(Fn))&&(S.error=S.error||"UUID is not valid."),S},serialize:function(f,g){var S=f;return S.nss=(f.uuid||"").toLowerCase(),S}};ne[rr.scheme]=rr,ne[Ca.scheme]=Ca,ne[ar.scheme]=ar,ne[Oa.scheme]=Oa,ne[Ia.scheme]=Ia,ne[Ta.scheme]=Ta,ne[La.scheme]=La,a.SCHEMES=ne,a.pctEncChar=ue,a.pctDecChars=ve,a.parse=W,a.removeDotSegments=_e,a.serialize=pe,a.resolveComponents=me,a.resolve=Re,a.normalize=ge,a.equal=cr,a.escapeComponent=qr,a.unescapeComponent=we,Object.defineProperty(a,"__esModule",{value:!0})})});var Er=U((Il,mt)=>{"use strict";mt.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,n;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=s;r--!==0;){var h=n[r];if(!a(e[h],t[h]))return!1}return!0}return e!==e&&t!==t}});var gt=U((Tl,pt)=>{"use strict";pt.exports=function(e){for(var t=0,s=e.length,r=0,n;r<s;)t++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<s&&(n=e.charCodeAt(r),(n&64512)==56320&&r++);return t}});var Qe=U((Ll,Et)=>{"use strict";Et.exports={copy:$i,checkDataType:ta,checkDataTypes:Di,coerceToTypes:Ci,toHash:na,getProperty:ia,escapeQuotes:oa,equal:Er(),ucs2length:gt(),varOccurences:Fi,varReplace:xi,schemaHasRules:Ii,schemaHasRulesExcept:Ti,schemaUnknownRules:Li,toQuotedString:sa,getPathExpr:Ni,getPath:ji,getData:Ui,unescapeFragment:Vi,unescapeJsonPointer:ua,escapeFragment:Mi,escapeJsonPointer:la};function $i(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function ta(a,e,t,s){var r=s?" !== ":" === ",n=s?" || ":" && ",h=s?"!":"",o=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return h+"Array.isArray("+e+")";case"object":return"("+h+e+n+"typeof "+e+r+'"object"'+n+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+n+o+"("+e+" % 1)"+n+e+r+e+(t?n+h+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?n+h+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function Di(a,e,t){switch(a.length){case 1:return ta(a[0],e,t,!0);default:var s="",r=na(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var n in r)s+=(s?" && ":"")+ta(n,e,t,!0);return s}}var yt=na(["string","number","integer","boolean","null"]);function Ci(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(yt[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(yt[e])return[e];if(a==="array"&&e==="array")return["array"]}}function na(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var Ai=/^[a-z$_][a-z$_0-9]*$/i,Oi=/'|\\/g;function ia(a){return typeof a=="number"?"["+a+"]":Ai.test(a)?"."+a:"['"+oa(a)+"']"}function oa(a){return a.replace(Oi,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Fi(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function xi(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function Ii(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function Ti(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function Li(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function sa(a){return"'"+oa(a)+"'"}function Ni(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Pt(a,r)}function ji(a,e,t){var s=sa(t?"/"+la(e):ia(e));return Pt(a,s)}var zi=/^\/(?:[^~]|~0|~1)*$/,qi=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ui(a,e,t){var s,r,n,h;if(a==="")return"rootData";if(a[0]=="/"){if(!zi.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,n="rootData"}else{if(h=a.match(qi),!h)throw new Error("Invalid JSON-pointer: "+a);if(s=+h[1],r=h[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(n="data"+(e-s||""),!r)return n}for(var o=n,E=r.split("/"),P=0;P<E.length;P++){var v=E[P];v&&(n+=ia(ua(v)),o+=" && "+n)}return o}function Pt(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Vi(a){return ua(decodeURIComponent(a))}function Mi(a){return encodeURIComponent(la(a))}function la(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function ua(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var fa=U((Nl,_t)=>{"use strict";var ki=Qe();_t.exports=Hi;function Hi(a){ki.copy(a,this)}});var St=U((jl,bt)=>{"use strict";var Le=bt.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};_r(e,s,r,a,"",a)};Le.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Le.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Le.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Le.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _r(a,e,t,s,r,n,h,o,E,P){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,n,h,o,E,P);for(var v in s){var m=s[v];if(Array.isArray(m)){if(v in Le.arrayKeywords)for(var y=0;y<m.length;y++)_r(a,e,t,m[y],r+"/"+v+"/"+y,n,r,v,s,y)}else if(v in Le.propsKeywords){if(m&&typeof m=="object")for(var u in m)_r(a,e,t,m[u],r+"/"+v+"/"+Qi(u),n,r,v,s,u)}else(v in Le.keywords||a.allKeys&&!(v in Le.skipKeywords))&&_r(a,e,t,m,r+"/"+v,n,r,v,s)}t(s,r,n,h,o,E,P)}}function Qi(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var Dr=U((zl,Dt)=>{"use strict";var hr=vt(),wt=Er(),Rr=Qe(),br=fa(),Bi=St();Dt.exports=je;je.normalizeId=Ne;je.fullPath=Sr;je.url=wr;je.ids=Yi;je.inlineRef=ha;je.schema=$r;function je(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return je.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof br)return ha(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=$r.call(this,e,t),n,h,o;return r&&(n=r.schema,e=r.root,o=r.baseId),n instanceof br?h=n.validate||a.call(this,n.schema,e,void 0,o):n!==void 0&&(h=ha(n,this._opts.inlineRefs)?n:a.call(this,n,e,void 0,o)),h}function $r(a,e){var t=hr.parse(e),s=$t(t),r=Sr(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var n=Ne(s),h=this._refs[n];if(typeof h=="string")return Ki.call(this,a,h,t);if(h instanceof br)h.validate||this._compile(h),a=h;else if(h=this._schemas[n],h instanceof br){if(h.validate||this._compile(h),n==Ne(e))return{schema:h,root:a,baseId:r};a=h}else return;if(!a.schema)return;r=Sr(this._getId(a.schema))}return Rt.call(this,t,r,a.schema,a)}function Ki(a,e,t){var s=$r.call(this,a,e);if(s){var r=s.schema,n=s.baseId;a=s.root;var h=this._getId(r);return h&&(n=wr(n,h)),Rt.call(this,t,n,r,a)}}var Gi=Rr.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Rt(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),n=1;n<r.length;n++){var h=r[n];if(h){if(h=Rr.unescapeFragment(h),t=t[h],t===void 0)break;var o;if(!Gi[h]&&(o=this._getId(t),o&&(e=wr(e,o)),t.$ref)){var E=wr(e,t.$ref),P=$r.call(this,s,E);P&&(t=P.schema,s=P.root,e=P.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Ji=Rr.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function ha(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return ca(a);if(e)return da(a)<=e}function ca(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!ca(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!ca(e)))return!1;return!0}function da(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=da(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Ji[r])e++;else if(t=a[r],typeof t=="object"&&(e+=da(t)+1),e==1/0)return 1/0}return e}function Sr(a,e){e!==!1&&(a=Ne(a));var t=hr.parse(a);return $t(t)}function $t(a){return hr.serialize(a).split("#")[0]+"#"}var Wi=/#\/?$/;function Ne(a){return a?a.replace(Wi,""):""}function wr(a,e){return e=Ne(e),hr.resolve(a,e)}function Yi(a){var e=Ne(this._getId(a)),t={"":e},s={"":Sr(e,!1)},r={},n=this;return Bi(a,{allKeys:!0},function(h,o,E,P,v,m,y){if(o!==""){var u=n._getId(h),p=t[P],l=s[P]+"/"+v;if(y!==void 0&&(l+="/"+(typeof y=="number"?y:Rr.escapeFragment(y))),typeof u=="string"){u=p=Ne(p?hr.resolve(p,u):u);var i=n._refs[u];if(typeof i=="string"&&(i=n._refs[i]),i&&i.schema){if(!wt(h,i.schema))throw new Error('id "'+u+'" resolves to more than one schema')}else if(u!=Ne(l))if(u[0]=="#"){if(r[u]&&!wt(h,r[u]))throw new Error('id "'+u+'" resolves to more than one schema');r[u]=h}else n._refs[u]=l}t[o]=p,s[o]=l}}),r}});var Cr=U((ql,At)=>{"use strict";var va=Dr();At.exports={Validation:Ct(Xi),MissingRef:Ct(ma)};function Xi(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}ma.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function ma(a,e,t){this.message=t||ma.message(a,e),this.missingRef=va.url(a,e),this.missingSchema=va.normalizeId(va.fullPath(this.missingRef))}function Ct(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var pa=U((Ul,Ot)=>{"use strict";Ot.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&function(n){return function(h){return function(o,E){var P={key:o,value:h[o]},v={key:E,value:h[E]};return n(P,v)}}}(e.cmp),r=[];return function n(h){if(h&&h.toJSON&&typeof h.toJSON=="function"&&(h=h.toJSON()),h!==void 0){if(typeof h=="number")return isFinite(h)?""+h:"null";if(typeof h!="object")return JSON.stringify(h);var o,E;if(Array.isArray(h)){for(E="[",o=0;o<h.length;o++)o&&(E+=","),E+=n(h[o])||"null";return E+"]"}if(h===null)return"null";if(r.indexOf(h)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var P=r.push(h)-1,v=Object.keys(h).sort(s&&s(h));for(E="",o=0;o<v.length;o++){var m=v[o],y=n(h[m]);!y||(E&&(E+=","),E+=JSON.stringify(m)+":"+y)}return r.splice(P,1),"{"+E+"}"}}(a)}});var ga=U((Vl,Ft)=>{"use strict";Ft.exports=function(e,t,s){var r="",n=e.schema.$async===!0,h=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var E=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(E){var P="unknown keyword: "+E;if(e.opts.strictKeywords==="log")e.logger.warn(P);else throw new Error(P)}}if(e.isTop&&(r+=" var validate = ",n&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(h||e.schema.$ref)){var t="false schema",v=e.level,m=e.dataLevel,y=e.schema[t],u=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,$=!e.opts.allErrors,j,l="data"+(m||""),R="valid"+v;if(e.schema===!1){e.isTop?$=!0:r+=" var "+R+" = false; ";var i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;r=i.pop(),!e.compositeRule&&$?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+R+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var b=e.isTop,v=e.level=0,m=e.dataLevel=0,l="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var v=e.level,m=e.dataLevel,l="data"+(m||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),n&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+v+" = errors;"}var R="valid"+v,$=!e.opts.allErrors,D="",L="",j,A=e.schema.type,q=Array.isArray(A);if(A&&e.opts.nullable&&e.schema.nullable===!0&&(q?A.indexOf("null")==-1&&(A=A.concat("null")):A!="null"&&(A=[A,"null"],q=!0)),q&&A.length==1&&(A=A[0],q=!1),e.schema.$ref&&h){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(h=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),A){if(e.opts.coerceTypes)var z=e.util.coerceToTypes(e.opts.coerceTypes,A);var N=e.RULES.types[A];if(z||q||N===!0||N&&!fe(N)){var u=e.schemaPath+".type",p=e.errSchemaPath+"/type",u=e.schemaPath+".type",p=e.errSchemaPath+"/type",C=q?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[C](A,l,e.opts.strictNumbers,!0)+") { ",z){var O="dataType"+v,x="coerced"+v;r+=" var "+O+" = typeof "+l+"; var "+x+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+O+" == 'object' && Array.isArray("+l+") && "+l+".length == 1) { "+l+" = "+l+"[0]; "+O+" = typeof "+l+"; if ("+e.util.checkDataType(e.schema.type,l,e.opts.strictNumbers)+") "+x+" = "+l+"; } "),r+=" if ("+x+" !== undefined) ; ";var M=z;if(M)for(var I,V=-1,k=M.length-1;V<k;)I=M[V+=1],I=="string"?r+=" else if ("+O+" == 'number' || "+O+" == 'boolean') "+x+" = '' + "+l+"; else if ("+l+" === null) "+x+" = ''; ":I=="number"||I=="integer"?(r+=" else if ("+O+" == 'boolean' || "+l+" === null || ("+O+" == 'string' && "+l+" && "+l+" == +"+l+" ",I=="integer"&&(r+=" && !("+l+" % 1)"),r+=")) "+x+" = +"+l+"; "):I=="boolean"?r+=" else if ("+l+" === 'false' || "+l+" === 0 || "+l+" === null) "+x+" = false; else if ("+l+" === 'true' || "+l+" === 1) "+x+" = true; ":I=="null"?r+=" else if ("+l+" === '' || "+l+" === 0 || "+l+" === false) "+x+" = null; ":e.opts.coerceTypes=="array"&&I=="array"&&(r+=" else if ("+O+" == 'string' || "+O+" == 'number' || "+O+" == 'boolean' || "+l+" == null) "+x+" = ["+l+"]; ");r+=" else {   ";var i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",q?r+=""+A.join(","):r+=""+A,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",q?r+=""+A.join(","):r+=""+A,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;r=i.pop(),!e.compositeRule&&$?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+x+" !== undefined) {  ";var F=m?"data"+(m-1||""):"parentData",J=m?e.dataPathArr[m]:"parentDataProperty";r+=" "+l+" = "+x+"; ",m||(r+="if ("+F+" !== undefined)"),r+=" "+F+"["+J+"] = "+x+"; } "}else{var i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",q?r+=""+A.join(","):r+=""+A,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",q?r+=""+A.join(","):r+=""+A,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;r=i.pop(),!e.compositeRule&&$?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!h)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",$&&(r+=" } if (errors === ",b?r+="0":r+="errs_"+v,r+=") { ",L+="}");else{var he=e.RULES;if(he){for(var N,de=-1,K=he.length-1;de<K;)if(N=he[de+=1],fe(N)){if(N.type&&(r+=" if ("+e.util.checkDataType(N.type,l,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(N.type=="object"&&e.schema.properties){var y=e.schema.properties,ne=Object.keys(y),ue=ne;if(ue)for(var ve,Ie=-1,Ce=ue.length-1;Ie<Ce;){ve=ue[Ie+=1];var ie=y[ve];if(ie.default!==void 0){var te=l+e.util.getProperty(ve);if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+te;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else r+=" if ("+te+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+te+" === null || "+te+" === '' "),r+=" ) "+te+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ie.default)+" ":r+=" "+JSON.stringify(ie.default)+" ",r+="; "}}}else if(N.type=="array"&&Array.isArray(e.schema.items)){var ze=e.schema.items;if(ze){for(var ie,V=-1,ce=ze.length-1;V<ce;)if(ie=ze[V+=1],ie.default!==void 0){var te=l+"["+V+"]";if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+te;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else r+=" if ("+te+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+te+" === null || "+te+" === '' "),r+=" ) "+te+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ie.default)+" ":r+=" "+JSON.stringify(ie.default)+" ",r+="; "}}}}var W=N.rules;if(W){for(var Te,Ae=-1,qe=W.length-1;Ae<qe;)if(Te=W[Ae+=1],_e(Te)){var Ue=Te.code(e,Te.keyword,N.type);Ue&&(r+=" "+Ue+" ",$&&(D+="}"))}}if($&&(r+=" "+D+" ",D=""),N.type&&(r+=" } ",A&&A===N.type&&!z)){r+=" else { ";var u=e.schemaPath+".type",p=e.errSchemaPath+"/type",i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",q?r+=""+A.join(","):r+=""+A,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",q?r+=""+A.join(","):r+=""+A,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;r=i.pop(),!e.compositeRule&&$?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}$&&(r+=" if (errors === ",b?r+="0":r+="errs_"+v,r+=") { ",L+="}")}}}$&&(r+=" "+L+" "),b?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+R+" = errors === errs_"+v+";";function fe(me){for(var Re=me.rules,ge=0;ge<Re.length;ge++)if(_e(Re[ge]))return!0}function _e(me){return e.schema[me.keyword]!==void 0||me.implements&&pe(me)}function pe(me){for(var Re=me.implements,ge=0;ge<Re.length;ge++)if(e.schema[Re[ge]]!==void 0)return!0}return r}});var Nt=U((Ml,Lt)=>{"use strict";var Ar=Dr(),Fr=Qe(),It=Cr(),Zi=pa(),xt=ga(),eo=Fr.ucs2length,ro=Er(),ao=It.Validation;Lt.exports=ya;function ya(a,e,t,s){var r=this,n=this._opts,h=[void 0],o={},E=[],P={},v=[],m={},y=[];e=e||{schema:a,refVal:h,refs:o};var u=to.call(this,a,e,s),p=this._compilations[u.index];if(u.compiling)return p.callValidate=_;var l=this._formats,i=this.RULES;try{var d=R(a,e,t,s);p.validate=d;var b=p.callValidate;return b&&(b.schema=d.schema,b.errors=null,b.refs=d.refs,b.refVal=d.refVal,b.root=d.root,b.$async=d.$async,n.sourceCode&&(b.source=d.source)),d}finally{so.call(this,a,e,s)}function _(){var C=p.validate,O=C.apply(this,arguments);return _.errors=C.errors,O}function R(C,O,x,M){var I=!O||O&&O.schema==C;if(O.schema!=e.schema)return ya.call(r,C,O,x,M);var V=C.$async===!0,k=xt({isTop:!0,schema:C,isRoot:I,baseId:M,root:O,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:It.MissingRef,RULES:i,validate:xt,util:Fr,resolve:Ar,resolveRef:$,usePattern:q,useDefault:z,useCustomRule:N,opts:n,formats:l,logger:r.logger,self:r});k=Or(h,oo)+Or(E,no)+Or(v,io)+Or(y,lo)+k,n.processCode&&(k=n.processCode(k,C));var F;try{var J=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",k);F=J(r,i,l,e,h,v,y,ro,eo,ao),h[0]=F}catch(he){throw r.logger.error("Error compiling schema, function code:",k),he}return F.schema=C,F.errors=null,F.refs=o,F.refVal=h,F.root=I?F:O,V&&(F.$async=!0),n.sourceCode===!0&&(F.source={code:k,patterns:E,defaults:v}),F}function $(C,O,x){O=Ar.url(C,O);var M=o[O],I,V;if(M!==void 0)return I=h[M],V="refVal["+M+"]",A(I,V);if(!x&&e.refs){var k=e.refs[O];if(k!==void 0)return I=e.refVal[k],V=D(O,I),A(I,V)}V=D(O);var F=Ar.call(r,R,e,O);if(F===void 0){var J=t&&t[O];J&&(F=Ar.inlineRef(J,n.inlineRefs)?J:ya.call(r,J,e,t,C))}if(F===void 0)L(O);else return j(O,F),A(F,V)}function D(C,O){var x=h.length;return h[x]=O,o[C]=x,"refVal"+x}function L(C){delete o[C]}function j(C,O){var x=o[C];h[x]=O}function A(C,O){return typeof C=="object"||typeof C=="boolean"?{code:O,schema:C,inline:!0}:{code:O,$async:C&&!!C.$async}}function q(C){var O=P[C];return O===void 0&&(O=P[C]=E.length,E[O]=C),"pattern"+O}function z(C){switch(typeof C){case"boolean":case"number":return""+C;case"string":return Fr.toQuotedString(C);case"object":if(C===null)return"null";var O=Zi(C),x=m[O];return x===void 0&&(x=m[O]=v.length,v[x]=C),"default"+x}}function N(C,O,x,M){if(r._opts.validateSchema!==!1){var I=C.definition.dependencies;if(I&&!I.every(function(ue){return Object.prototype.hasOwnProperty.call(x,ue)}))throw new Error("parent schema must have all required keywords: "+I.join(","));var V=C.definition.validateSchema;if(V){var k=V(O);if(!k){var F="keyword schema is invalid: "+r.errorsText(V.errors);if(r._opts.validateSchema=="log")r.logger.error(F);else throw new Error(F)}}}var J=C.definition.compile,he=C.definition.inline,de=C.definition.macro,K;if(J)K=J.call(r,O,x,M);else if(de)K=de.call(r,O,x,M),n.validateSchema!==!1&&r.validateSchema(K,!0);else if(he)K=he.call(r,M,C.keyword,O,x);else if(K=C.definition.validate,!K)return;if(K===void 0)throw new Error('custom keyword "'+C.keyword+'"failed to compile');var ne=y.length;return y[ne]=K,{code:"customRule"+ne,validate:K}}}function to(a,e,t){var s=Tt.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function so(a,e,t){var s=Tt.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function Tt(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function no(a,e){return"var pattern"+a+" = new RegExp("+Fr.toQuotedString(e[a])+");"}function io(a){return"var default"+a+" = defaults["+a+"];"}function oo(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function lo(a){return"var customRule"+a+" = customRules["+a+"];"}function Or(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var zt=U((kl,jt)=>{"use strict";var xr=jt.exports=function(){this._cache={}};xr.prototype.put=function(e,t){this._cache[e]=t};xr.prototype.get=function(e){return this._cache[e]};xr.prototype.del=function(e){delete this._cache[e]};xr.prototype.clear=function(){this._cache={}}});var Wt=U((Hl,Jt)=>{"use strict";var uo=Qe(),fo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ho=[0,31,28,31,30,31,30,31,31,30,31,30,31],co=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,qt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,vo=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,mo=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Ut=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Vt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Mt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,kt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Ht=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Qt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Jt.exports=Ir;function Ir(a){return a=a=="full"?"full":"fast",uo.copy(Ir[a])}Ir.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Ut,url:Vt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:qt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Gt,uuid:Mt,"json-pointer":kt,"json-pointer-uri-fragment":Ht,"relative-json-pointer":Qt};Ir.full={date:Bt,time:Kt,"date-time":yo,uri:Eo,"uri-reference":mo,"uri-template":Ut,url:Vt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:qt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Gt,uuid:Mt,"json-pointer":kt,"json-pointer-uri-fragment":Ht,"relative-json-pointer":Qt};function po(a){return a%4===0&&(a%100!==0||a%400===0)}function Bt(a){var e=a.match(fo);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&po(t)?29:ho[s])}function Kt(a,e){var t=a.match(co);if(!t)return!1;var s=t[1],r=t[2],n=t[3],h=t[5];return(s<=23&&r<=59&&n<=59||s==23&&r==59&&n==60)&&(!e||h)}var go=/t|\s/i;function yo(a){var e=a.split(go);return e.length==2&&Bt(e[0])&&Kt(e[1],!0)}var Po=/\/|:/;function Eo(a){return Po.test(a)&&vo.test(a)}var _o=/[^\\]\\Z/;function Gt(a){if(_o.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var Xt=U((Ql,Yt)=>{"use strict";Yt.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.errSchemaPath+"/"+t,P=!e.opts.allErrors,v="data"+(h||""),m="valid"+n,y,u;if(o=="#"||o=="#/")e.isRoot?(y=e.async,u="validate"):(y=e.root.schema.$async===!0,u="root.refVal[0]");else{var p=e.resolveRef(e.baseId,o,e.isRoot);if(p===void 0){var l=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(l);var i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(E)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var d=r;r=i.pop(),!e.compositeRule&&P?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",P&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(l),P&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,l)}else if(p.inline){var b=e.util.copy(e);b.level++;var _="valid"+b.level;b.schema=p.schema,b.schemaPath="",b.errSchemaPath=o;var R=e.validate(b).replace(/validate\.schema/g,p.code);r+=" "+R+" ",P&&(r+=" if ("+_+") { ")}else y=p.$async===!0||e.async&&p.$async!==!1,u=p.code}if(u){var i=i||[];i.push(r),r="",e.opts.passContext?r+=" "+u+".call(this, ":r+=" "+u+"( ",r+=" "+v+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var $=h?"data"+(h-1||""):"parentData",D=h?e.dataPathArr[h]:"parentDataProperty";r+=" , "+$+" , "+D+", rootData)  ";var L=r;if(r=i.pop(),y){if(!e.async)throw new Error("async schema referenced by sync schema");P&&(r+=" var "+m+"; "),r+=" try { await "+L+"; ",P&&(r+=" "+m+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",P&&(r+=" "+m+" = false; "),r+=" } ",P&&(r+=" if ("+m+") { ")}else r+=" if (!"+L+") { if (vErrors === null) vErrors = "+u+".errors; else vErrors = vErrors.concat("+u+".errors); errors = vErrors.length; } ",P&&(r+=" else { ")}return r}});var es=U((Bl,Zt)=>{"use strict";Zt.exports=function(e,t,s){var r=" ",n=e.schema[t],h=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,E=!e.opts.allErrors,P=e.util.copy(e),v="";P.level++;var m="valid"+P.level,y=P.baseId,u=!0,p=n;if(p)for(var l,i=-1,d=p.length-1;i<d;)l=p[i+=1],(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all))&&(u=!1,P.schema=l,P.schemaPath=h+"["+i+"]",P.errSchemaPath=o+"/"+i,r+="  "+e.validate(P)+" ",P.baseId=y,E&&(r+=" if ("+m+") { ",v+="}"));return E&&(u?r+=" if (true) { ":r+=" "+v.slice(0,-1)+" "),r}});var as=U((Kl,rs)=>{"use strict";rs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u="errs__"+n,p=e.util.copy(e),l="";p.level++;var i="valid"+p.level,d=o.every(function(j){return e.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:e.util.schemaHasRules(j,e.RULES.all)});if(d){var b=p.baseId;r+=" var "+u+" = errors; var "+y+" = false;  ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var R=o;if(R)for(var $,D=-1,L=R.length-1;D<L;)$=R[D+=1],p.schema=$,p.schemaPath=E+"["+D+"]",p.errSchemaPath=P+"/"+D,r+="  "+e.validate(p)+" ",p.baseId=b,r+=" "+y+" = "+y+" || "+i+"; if (!"+y+") { ",l+="}";e.compositeRule=p.compositeRule=_,r+=" "+l+" if (!"+y+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&v&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else v&&(r+=" if (true) { ");return r}});var ss=U((Gl,ts)=>{"use strict";ts.exports=function(e,t,s){var r=" ",n=e.schema[t],h=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,E=e.util.toQuotedString(n);return e.opts.$comment===!0?r+=" console.log("+E+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+E+", "+e.util.toQuotedString(h)+", validate.root.schema);"),r}});var is=U((Jl,ns)=>{"use strict";ns.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u=e.opts.$data&&o&&o.$data,p;u?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",p="schema"+n):p=o,u||(r+=" var schema"+n+" = validate.schema"+E+";"),r+="var "+y+" = equal("+m+", schema"+n+"); if (!"+y+") {   ";var l=l||[];l.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { allowedValue: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var i=r;return r=l.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+i+"]); ":r+=" validate.errors = ["+i+"]; return false; ":r+=" var err = "+i+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",v&&(r+=" else { "),r}});var ls=U((Wl,os)=>{"use strict";os.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u="errs__"+n,p=e.util.copy(e),l="";p.level++;var i="valid"+p.level,d="i"+n,b=p.dataLevel=e.dataLevel+1,_="data"+b,R=e.baseId,$=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(r+="var "+u+" = errors;var "+y+";",$){var D=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=E,p.errSchemaPath=P,r+=" var "+i+" = false; for (var "+d+" = 0; "+d+" < "+m+".length; "+d+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var L=m+"["+d+"]";p.dataPathArr[b]=d;var j=e.validate(p);p.baseId=R,e.util.varOccurences(j,_)<2?r+=" "+e.util.varReplace(j,_,L)+" ":r+=" var "+_+" = "+L+"; "+j+" ",r+=" if ("+i+") break; }  ",e.compositeRule=p.compositeRule=D,r+=" "+l+" if (!"+i+") {"}else r+=" if ("+m+".length == 0) {";var A=A||[];A.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var q=r;return r=A.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+q+"]); ":r+=" validate.errors = ["+q+"]; return false; ":r+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",$&&(r+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var fs=U((Yl,us)=>{"use strict";us.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="errs__"+n,u=e.util.copy(e),p="";u.level++;var l="valid"+u.level,i={},d={},b=e.opts.ownProperties;for(D in o)if(D!="__proto__"){var _=o[D],R=Array.isArray(_)?d:i;R[D]=_}r+="var "+y+" = errors;";var $=e.errorPath;r+="var missing"+n+";";for(var D in d)if(R=d[D],R.length){if(r+=" if ( "+m+e.util.getProperty(D)+" !== undefined ",b&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(D)+"') "),v){r+=" && ( ";var L=R;if(L)for(var j,A=-1,q=L.length-1;A<q;){j=L[A+=1],A&&(r+=" || ");var z=e.util.getProperty(j),N=m+z;r+=" ( ( "+N+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(j)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:z)+") ) "}r+=")) {  ";var C="missing"+n,O="' + "+C+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr($,C,!0):$+" + "+C);var x=x||[];x.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { property: '"+e.util.escapeQuotes(D)+"', missingProperty: '"+O+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",R.length==1?r+="property "+e.util.escapeQuotes(R[0]):r+="properties "+e.util.escapeQuotes(R.join(", ")),r+=" when property "+e.util.escapeQuotes(D)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var M=r;r=x.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var I=R;if(I)for(var j,V=-1,k=I.length-1;V<k;){j=I[V+=1];var z=e.util.getProperty(j),O=e.util.escapeQuotes(j),N=m+z;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,j,e.opts.jsonPointers)),r+=" if ( "+N+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(j)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { property: '"+e.util.escapeQuotes(D)+"', missingProperty: '"+O+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",R.length==1?r+="property "+e.util.escapeQuotes(R[0]):r+="properties "+e.util.escapeQuotes(R.join(", ")),r+=" when property "+e.util.escapeQuotes(D)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",v&&(p+="}",r+=" else { ")}e.errorPath=$;var F=u.baseId;for(var D in i){var _=i[D];(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(r+=" "+l+" = true; if ( "+m+e.util.getProperty(D)+" !== undefined ",b&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(D)+"') "),r+=") { ",u.schema=_,u.schemaPath=E+e.util.getProperty(D),u.errSchemaPath=P+"/"+e.util.escapeFragment(D),r+="  "+e.validate(u)+" ",u.baseId=F,r+=" }  ",v&&(r+=" if ("+l+") { ",p+="}"))}return v&&(r+="   "+p+" if ("+y+" == errors) {"),r}});var cs=U((Xl,hs)=>{"use strict";hs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u=e.opts.$data&&o&&o.$data,p;u?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",p="schema"+n):p=o;var l="i"+n,i="schema"+n;u||(r+=" var "+i+" = validate.schema"+E+";"),r+="var "+y+";",u&&(r+=" if (schema"+n+" === undefined) "+y+" = true; else if (!Array.isArray(schema"+n+")) "+y+" = false; else {"),r+=""+y+" = false;for (var "+l+"=0; "+l+"<"+i+".length; "+l+"++) if (equal("+m+", "+i+"["+l+"])) { "+y+" = true; break; }",u&&(r+="  }  "),r+=" if (!"+y+") {   ";var d=d||[];d.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { allowedValues: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;return r=d.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",v&&(r+=" else { "),r}});var vs=U((Zl,ds)=>{"use strict";ds.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||"");if(e.opts.format===!1)return v&&(r+=" if (true) { "),r;var y=e.opts.$data&&o&&o.$data,u;y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o;var p=e.opts.unknownFormats,l=Array.isArray(p);if(y){var i="format"+n,d="isObject"+n,b="formatType"+n;r+=" var "+i+" = formats["+u+"]; var "+d+" = typeof "+i+" == 'object' && !("+i+" instanceof RegExp) && "+i+".validate; var "+b+" = "+d+" && "+i+".type || 'string'; if ("+d+") { ",e.async&&(r+=" var async"+n+" = "+i+".async; "),r+=" "+i+" = "+i+".validate; } if (  ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),r+=" (",p!="ignore"&&(r+=" ("+u+" && !"+i+" ",l&&(r+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),r+=") || "),r+=" ("+i+" && "+b+" == '"+s+"' && !(typeof "+i+" == 'function' ? ",e.async?r+=" (async"+n+" ? await "+i+"("+m+") : "+i+"("+m+")) ":r+=" "+i+"("+m+") ",r+=" : "+i+".test("+m+"))))) {"}else{var i=e.formats[o];if(!i){if(p=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),v&&(r+=" if (true) { "),r;if(l&&p.indexOf(o)>=0)return v&&(r+=" if (true) { "),r;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var d=typeof i=="object"&&!(i instanceof RegExp)&&i.validate,b=d&&i.type||"string";if(d){var _=i.async===!0;i=i.validate}if(b!=s)return v&&(r+=" if (true) { "),r;if(_){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(o)+".validate";r+=" if (!(await "+R+"("+m+"))) { "}else{r+=" if (! ";var R="formats"+e.util.getProperty(o);d&&(R+=".validate"),typeof i=="function"?r+=" "+R+"("+m+") ":r+=" "+R+".test("+m+") ",r+=") { "}}var $=$||[];$.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { format:  ",y?r+=""+u:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,y?r+="' + "+u+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var D=r;return r=$.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",v&&(r+=" else { "),r}});var ps=U((eu,ms)=>{"use strict";ms.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u="errs__"+n,p=e.util.copy(e);p.level++;var l="valid"+p.level,i=e.schema.then,d=e.schema.else,b=i!==void 0&&(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)),_=d!==void 0&&(e.opts.strictKeywords?typeof d=="object"&&Object.keys(d).length>0||d===!1:e.util.schemaHasRules(d,e.RULES.all)),R=p.baseId;if(b||_){var $;p.createErrors=!1,p.schema=o,p.schemaPath=E,p.errSchemaPath=P,r+=" var "+u+" = errors; var "+y+" = true;  ";var D=e.compositeRule;e.compositeRule=p.compositeRule=!0,r+="  "+e.validate(p)+" ",p.baseId=R,p.createErrors=!0,r+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=D,b?(r+=" if ("+l+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(p)+" ",p.baseId=R,r+=" "+y+" = "+l+"; ",b&&_?($="ifClause"+n,r+=" var "+$+" = 'then'; "):$="'then'",r+=" } ",_&&(r+=" else { ")):r+=" if (!"+l+") { ",_&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(p)+" ",p.baseId=R,r+=" "+y+" = "+l+"; ",b&&_?($="ifClause"+n,r+=" var "+$+" = 'else'; "):$="'else'",r+=" } "),r+=" if (!"+y+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { failingKeyword: "+$+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+$+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&v&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",v&&(r+=" else { ")}else v&&(r+=" if (true) { ");return r}});var ys=U((ru,gs)=>{"use strict";gs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u="errs__"+n,p=e.util.copy(e),l="";p.level++;var i="valid"+p.level,d="i"+n,b=p.dataLevel=e.dataLevel+1,_="data"+b,R=e.baseId;if(r+="var "+u+" = errors;var "+y+";",Array.isArray(o)){var $=e.schema.additionalItems;if($===!1){r+=" "+y+" = "+m+".length <= "+o.length+"; ";var D=P;P=e.errSchemaPath+"/additionalItems",r+="  if (!"+y+") {   ";var L=L||[];L.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var j=r;r=L.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+j+"]); ":r+=" validate.errors = ["+j+"]; return false; ":r+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",P=D,v&&(l+="}",r+=" else { ")}var A=o;if(A){for(var q,z=-1,N=A.length-1;z<N;)if(q=A[z+=1],e.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:e.util.schemaHasRules(q,e.RULES.all)){r+=" "+i+" = true; if ("+m+".length > "+z+") { ";var C=m+"["+z+"]";p.schema=q,p.schemaPath=E+"["+z+"]",p.errSchemaPath=P+"/"+z,p.errorPath=e.util.getPathExpr(e.errorPath,z,e.opts.jsonPointers,!0),p.dataPathArr[b]=z;var O=e.validate(p);p.baseId=R,e.util.varOccurences(O,_)<2?r+=" "+e.util.varReplace(O,_,C)+" ":r+=" var "+_+" = "+C+"; "+O+" ",r+=" }  ",v&&(r+=" if ("+i+") { ",l+="}")}}if(typeof $=="object"&&(e.opts.strictKeywords?typeof $=="object"&&Object.keys($).length>0||$===!1:e.util.schemaHasRules($,e.RULES.all))){p.schema=$,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+i+" = true; if ("+m+".length > "+o.length+") {  for (var "+d+" = "+o.length+"; "+d+" < "+m+".length; "+d+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var C=m+"["+d+"]";p.dataPathArr[b]=d;var O=e.validate(p);p.baseId=R,e.util.varOccurences(O,_)<2?r+=" "+e.util.varReplace(O,_,C)+" ":r+=" var "+_+" = "+C+"; "+O+" ",v&&(r+=" if (!"+i+") break; "),r+=" } }  ",v&&(r+=" if ("+i+") { ",l+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){p.schema=o,p.schemaPath=E,p.errSchemaPath=P,r+="  for (var "+d+" = "+0+"; "+d+" < "+m+".length; "+d+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var C=m+"["+d+"]";p.dataPathArr[b]=d;var O=e.validate(p);p.baseId=R,e.util.varOccurences(O,_)<2?r+=" "+e.util.varReplace(O,_,C)+" ":r+=" var "+_+" = "+C+"; "+O+" ",v&&(r+=" if (!"+i+") break; "),r+=" }"}return v&&(r+=" "+l+" if ("+u+" == errors) {"),r}});var Pa=U((au,Ps)=>{"use strict";Ps.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,R,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o;var p=t=="maximum",l=p?"exclusiveMaximum":"exclusiveMinimum",i=e.schema[l],d=e.opts.$data&&i&&i.$data,b=p?"<":">",_=p?">":"<",R=void 0;if(!(y||typeof o=="number"||o===void 0))throw new Error(t+" must be number");if(!(d||i===void 0||typeof i=="number"||typeof i=="boolean"))throw new Error(l+" must be number or boolean");if(d){var $=e.util.getData(i.$data,h,e.dataPathArr),D="exclusive"+n,L="exclType"+n,j="exclIsNumber"+n,A="op"+n,q="' + "+A+" + '";r+=" var schemaExcl"+n+" = "+$+"; ",$="schemaExcl"+n,r+=" var "+D+"; var "+L+" = typeof "+$+"; if ("+L+" != 'boolean' && "+L+" != 'undefined' && "+L+" != 'number') { ";var R=l,z=z||[];z.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+l+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var N=r;r=z.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" "+L+" == 'number' ? ( ("+D+" = "+u+" === undefined || "+$+" "+b+"= "+u+") ? "+m+" "+_+"= "+$+" : "+m+" "+_+" "+u+" ) : ( ("+D+" = "+$+" === true) ? "+m+" "+_+"= "+u+" : "+m+" "+_+" "+u+" ) || "+m+" !== "+m+") { var op"+n+" = "+D+" ? '"+b+"' : '"+b+"='; ",o===void 0&&(R=l,P=e.errSchemaPath+"/"+l,u=$,y=d)}else{var j=typeof i=="number",q=b;if(j&&y){var A="'"+q+"'";r+=" if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" ( "+u+" === undefined || "+i+" "+b+"= "+u+" ? "+m+" "+_+"= "+i+" : "+m+" "+_+" "+u+" ) || "+m+" !== "+m+") { "}else{j&&o===void 0?(D=!0,R=l,P=e.errSchemaPath+"/"+l,u=i,_+="="):(j&&(u=Math[p?"min":"max"](i,o)),i===(j?u:!0)?(D=!0,R=l,P=e.errSchemaPath+"/"+l,_+="="):(D=!1,q+="="));var A="'"+q+"'";r+=" if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" "+m+" "+_+" "+u+" || "+m+" !== "+m+") { "}}R=R||t;var z=z||[];z.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { comparison: "+A+", limit: "+u+", exclusive: "+D+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+q+" ",y?r+="' + "+u:r+=""+u+"'"),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var N=r;return r=z.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",v&&(r+=" else { "),r}});var Ea=U((tu,Es)=>{"use strict";Es.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,l,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;if(y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o,!(y||typeof o=="number"))throw new Error(t+" must be number");var p=t=="maxItems"?">":"<";r+="if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" "+m+".length "+p+" "+u+") { ";var l=t,i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(l||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",y?r+="' + "+u+" + '":r+=""+o,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var d=r;return r=i.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",v&&(r+=" else { "),r}});var _a=U((su,_s)=>{"use strict";_s.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,l,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;if(y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o,!(y||typeof o=="number"))throw new Error(t+" must be number");var p=t=="maxLength"?">":"<";r+="if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),e.opts.unicode===!1?r+=" "+m+".length ":r+=" ucs2length("+m+") ",r+=" "+p+" "+u+") { ";var l=t,i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(l||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",y?r+="' + "+u+" + '":r+=""+o,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var d=r;return r=i.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",v&&(r+=" else { "),r}});var ba=U((nu,bs)=>{"use strict";bs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,l,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;if(y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o,!(y||typeof o=="number"))throw new Error(t+" must be number");var p=t=="maxProperties"?">":"<";r+="if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),r+=" Object.keys("+m+").length "+p+" "+u+") { ";var l=t,i=i||[];i.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(l||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { limit: "+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",y?r+="' + "+u+" + '":r+=""+o,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var d=r;return r=i.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",v&&(r+=" else { "),r}});var ws=U((iu,Ss)=>{"use strict";Ss.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;if(y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o,!(y||typeof o=="number"))throw new Error(t+" must be number");r+="var division"+n+";if (",y&&(r+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),r+=" (division"+n+" = "+m+" / "+u+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+n+" !== parseInt(division"+n+") ",r+=" ) ",y&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { multipleOf: "+u+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",y?r+="' + "+u:r+=""+u+"'"),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var l=r;return r=p.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+l+"]); ":r+=" validate.errors = ["+l+"]; return false; ":r+=" var err = "+l+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",v&&(r+=" else { "),r}});var $s=U((ou,Rs)=>{"use strict";Rs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="errs__"+n,u=e.util.copy(e);u.level++;var p="valid"+u.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=E,u.errSchemaPath=P,r+=" var "+y+" = errors;  ";var l=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.createErrors=!1;var i;u.opts.allErrors&&(i=u.opts.allErrors,u.opts.allErrors=!1),r+=" "+e.validate(u)+" ",u.createErrors=!0,i&&(u.opts.allErrors=i),e.compositeRule=u.compositeRule=l,r+=" if ("+p+") {   ";var d=d||[];d.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=d.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+y+"; if (vErrors !== null) { if ("+y+") vErrors.length = "+y+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",v&&(r+=" if (false) { ");return r}});var Cs=U((lu,Ds)=>{"use strict";Ds.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u="errs__"+n,p=e.util.copy(e),l="";p.level++;var i="valid"+p.level,d=p.baseId,b="prevValid"+n,_="passingSchemas"+n;r+="var "+u+" = errors , "+b+" = false , "+y+" = false , "+_+" = null; ";var R=e.compositeRule;e.compositeRule=p.compositeRule=!0;var $=o;if($)for(var D,L=-1,j=$.length-1;L<j;)D=$[L+=1],(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))?(p.schema=D,p.schemaPath=E+"["+L+"]",p.errSchemaPath=P+"/"+L,r+="  "+e.validate(p)+" ",p.baseId=d):r+=" var "+i+" = true; ",L&&(r+=" if ("+i+" && "+b+") { "+y+" = false; "+_+" = ["+_+", "+L+"]; } else { ",l+="}"),r+=" if ("+i+") { "+y+" = "+b+" = true; "+_+" = "+L+"; }";return e.compositeRule=p.compositeRule=R,r+=""+l+"if (!"+y+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { passingSchemas: "+_+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&v&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var Os=U((uu,As)=>{"use strict";As.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y=e.opts.$data&&o&&o.$data,u;y?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",u="schema"+n):u=o;var p=y?"(new RegExp("+u+"))":e.usePattern(o);r+="if ( ",y&&(r+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),r+=" !"+p+".test("+m+") ) {   ";var l=l||[];l.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { pattern:  ",y?r+=""+u:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,y?r+="' + "+u+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",y?r+="validate.schema"+E:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var i=r;return r=l.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+i+"]); ":r+=" validate.errors = ["+i+"]; return false; ":r+=" var err = "+i+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",v&&(r+=" else { "),r}});var xs=U((fu,Fs)=>{"use strict";Fs.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="errs__"+n,u=e.util.copy(e),p="";u.level++;var l="valid"+u.level,i="key"+n,d="idx"+n,b=u.dataLevel=e.dataLevel+1,_="data"+b,R="dataProperties"+n,$=Object.keys(o||{}).filter(V),D=e.schema.patternProperties||{},L=Object.keys(D).filter(V),j=e.schema.additionalProperties,A=$.length||L.length,q=j===!1,z=typeof j=="object"&&Object.keys(j).length,N=e.opts.removeAdditional,C=q||z||N,O=e.opts.ownProperties,x=e.baseId,M=e.schema.required;if(M&&!(e.opts.$data&&M.$data)&&M.length<e.opts.loopRequired)var I=e.util.toHash(M);function V(we){return we!=="__proto__"}if(r+="var "+y+" = errors;var "+l+" = true;",O&&(r+=" var "+R+" = undefined;"),C){if(O?r+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+d+"=0; "+d+"<"+R+".length; "+d+"++) { var "+i+" = "+R+"["+d+"]; ":r+=" for (var "+i+" in "+m+") { ",A){if(r+=" var isAdditional"+n+" = !(false ",$.length)if($.length>8)r+=" || validate.schema"+E+".hasOwnProperty("+i+") ";else{var k=$;if(k)for(var F,J=-1,he=k.length-1;J<he;)F=k[J+=1],r+=" || "+i+" == "+e.util.toQuotedString(F)+" "}if(L.length){var de=L;if(de)for(var K,ne=-1,ue=de.length-1;ne<ue;)K=de[ne+=1],r+=" || "+e.usePattern(K)+".test("+i+") "}r+=" ); if (isAdditional"+n+") { "}if(N=="all")r+=" delete "+m+"["+i+"]; ";else{var ve=e.errorPath,Ie="' + "+i+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,i,e.opts.jsonPointers)),q)if(N)r+=" delete "+m+"["+i+"]; ";else{r+=" "+l+" = false; ";var Ce=P;P=e.errSchemaPath+"/additionalProperties";var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { additionalProperty: '"+Ie+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var te=r;r=ie.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+te+"]); ":r+=" validate.errors = ["+te+"]; return false; ":r+=" var err = "+te+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",P=Ce,v&&(r+=" break; ")}else if(z)if(N=="failing"){r+=" var "+y+" = errors;  ";var ze=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=j,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,i,e.opts.jsonPointers);var ce=m+"["+i+"]";u.dataPathArr[b]=i;var W=e.validate(u);u.baseId=x,e.util.varOccurences(W,_)<2?r+=" "+e.util.varReplace(W,_,ce)+" ":r+=" var "+_+" = "+ce+"; "+W+" ",r+=" if (!"+l+") { errors = "+y+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+i+"]; }  ",e.compositeRule=u.compositeRule=ze}else{u.schema=j,u.schemaPath=e.schemaPath+".additionalProperties",u.errSchemaPath=e.errSchemaPath+"/additionalProperties",u.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,i,e.opts.jsonPointers);var ce=m+"["+i+"]";u.dataPathArr[b]=i;var W=e.validate(u);u.baseId=x,e.util.varOccurences(W,_)<2?r+=" "+e.util.varReplace(W,_,ce)+" ":r+=" var "+_+" = "+ce+"; "+W+" ",v&&(r+=" if (!"+l+") break; ")}e.errorPath=ve}A&&(r+=" } "),r+=" }  ",v&&(r+=" if ("+l+") { ",p+="}")}var Te=e.opts.useDefaults&&!e.compositeRule;if($.length){var Ae=$;if(Ae)for(var F,qe=-1,Ue=Ae.length-1;qe<Ue;){F=Ae[qe+=1];var fe=o[F];if(e.opts.strictKeywords?typeof fe=="object"&&Object.keys(fe).length>0||fe===!1:e.util.schemaHasRules(fe,e.RULES.all)){var _e=e.util.getProperty(F),ce=m+_e,pe=Te&&fe.default!==void 0;u.schema=fe,u.schemaPath=E+_e,u.errSchemaPath=P+"/"+e.util.escapeFragment(F),u.errorPath=e.util.getPath(e.errorPath,F,e.opts.jsonPointers),u.dataPathArr[b]=e.util.toQuotedString(F);var W=e.validate(u);if(u.baseId=x,e.util.varOccurences(W,_)<2){W=e.util.varReplace(W,_,ce);var me=ce}else{var me=_;r+=" var "+_+" = "+ce+"; "}if(pe)r+=" "+W+" ";else{if(I&&I[F]){r+=" if ( "+me+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") { "+l+" = false; ";var ve=e.errorPath,Ce=P,Re=e.util.escapeQuotes(F);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ve,F,e.opts.jsonPointers)),P=e.errSchemaPath+"/required";var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+Re+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Re+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var te=r;r=ie.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+te+"]); ":r+=" validate.errors = ["+te+"]; return false; ":r+=" var err = "+te+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",P=Ce,e.errorPath=ve,r+=" } else { "}else v?(r+=" if ( "+me+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") { "+l+" = true; } else { "):(r+=" if ("+me+" !== undefined ",O&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=" ) { ");r+=" "+W+" } "}}v&&(r+=" if ("+l+") { ",p+="}")}}if(L.length){var ge=L;if(ge)for(var K,cr=-1,qr=ge.length-1;cr<qr;){K=ge[cr+=1];var fe=D[K];if(e.opts.strictKeywords?typeof fe=="object"&&Object.keys(fe).length>0||fe===!1:e.util.schemaHasRules(fe,e.RULES.all)){u.schema=fe,u.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(K),u.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(K),O?r+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+d+"=0; "+d+"<"+R+".length; "+d+"++) { var "+i+" = "+R+"["+d+"]; ":r+=" for (var "+i+" in "+m+") { ",r+=" if ("+e.usePattern(K)+".test("+i+")) { ",u.errorPath=e.util.getPathExpr(e.errorPath,i,e.opts.jsonPointers);var ce=m+"["+i+"]";u.dataPathArr[b]=i;var W=e.validate(u);u.baseId=x,e.util.varOccurences(W,_)<2?r+=" "+e.util.varReplace(W,_,ce)+" ":r+=" var "+_+" = "+ce+"; "+W+" ",v&&(r+=" if (!"+l+") break; "),r+=" } ",v&&(r+=" else "+l+" = true; "),r+=" }  ",v&&(r+=" if ("+l+") { ",p+="}")}}}return v&&(r+=" "+p+" if ("+y+" == errors) {"),r}});var Ts=U((hu,Is)=>{"use strict";Is.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="errs__"+n,u=e.util.copy(e),p="";u.level++;var l="valid"+u.level;if(r+="var "+y+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=E,u.errSchemaPath=P;var i="key"+n,d="idx"+n,b="i"+n,_="' + "+i+" + '",R=u.dataLevel=e.dataLevel+1,$="data"+R,D="dataProperties"+n,L=e.opts.ownProperties,j=e.baseId;L&&(r+=" var "+D+" = undefined; "),L?r+=" "+D+" = "+D+" || Object.keys("+m+"); for (var "+d+"=0; "+d+"<"+D+".length; "+d+"++) { var "+i+" = "+D+"["+d+"]; ":r+=" for (var "+i+" in "+m+") { ",r+=" var startErrs"+n+" = errors; ";var A=i,q=e.compositeRule;e.compositeRule=u.compositeRule=!0;var z=e.validate(u);u.baseId=j,e.util.varOccurences(z,$)<2?r+=" "+e.util.varReplace(z,$,A)+" ":r+=" var "+$+" = "+A+"; "+z+" ",e.compositeRule=u.compositeRule=q,r+=" if (!"+l+") { for (var "+b+"=startErrs"+n+"; "+b+"<errors; "+b+"++) { vErrors["+b+"].propertyName = "+i+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { propertyName: '"+_+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&v&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),v&&(r+=" break; "),r+=" } }"}return v&&(r+=" "+p+" if ("+y+" == errors) {"),r}});var Ns=U((cu,Ls)=>{"use strict";Ls.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u=e.opts.$data&&o&&o.$data,p;u?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",p="schema"+n):p=o;var l="schema"+n;if(!u)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var i=[],d=o;if(d)for(var b,_=-1,R=d.length-1;_<R;){b=d[_+=1];var $=e.schema.properties[b];$&&(e.opts.strictKeywords?typeof $=="object"&&Object.keys($).length>0||$===!1:e.util.schemaHasRules($,e.RULES.all))||(i[i.length]=b)}}else var i=o;if(u||i.length){var D=e.errorPath,L=u||i.length>=e.opts.loopRequired,j=e.opts.ownProperties;if(v)if(r+=" var missing"+n+"; ",L){u||(r+=" var "+l+" = validate.schema"+E+"; ");var A="i"+n,q="schema"+n+"["+A+"]",z="' + "+q+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,q,e.opts.jsonPointers)),r+=" var "+y+" = true; ",u&&(r+=" if (schema"+n+" === undefined) "+y+" = true; else if (!Array.isArray(schema"+n+")) "+y+" = false; else {"),r+=" for (var "+A+" = 0; "+A+" < "+l+".length; "+A+"++) { "+y+" = "+m+"["+l+"["+A+"]] !== undefined ",j&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+l+"["+A+"]) "),r+="; if (!"+y+") break; } ",u&&(r+="  }  "),r+="  if (!"+y+") {   ";var N=N||[];N.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var C=r;r=N.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var O=i;if(O)for(var x,A=-1,M=O.length-1;A<M;){x=O[A+=1],A&&(r+=" || ");var I=e.util.getProperty(x),V=m+I;r+=" ( ( "+V+" === undefined ",j&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(x)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?x:I)+") ) "}r+=") {  ";var q="missing"+n,z="' + "+q+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,q,!0):D+" + "+q);var N=N||[];N.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var C=r;r=N.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(L){u||(r+=" var "+l+" = validate.schema"+E+"; ");var A="i"+n,q="schema"+n+"["+A+"]",z="' + "+q+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,q,e.opts.jsonPointers)),u&&(r+=" if ("+l+" && !Array.isArray("+l+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+l+" !== undefined) { "),r+=" for (var "+A+" = 0; "+A+" < "+l+".length; "+A+"++) { if ("+m+"["+l+"["+A+"]] === undefined ",j&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+l+"["+A+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(r+="  }  ")}else{var k=i;if(k)for(var x,F=-1,J=k.length-1;F<J;){x=k[F+=1];var I=e.util.getProperty(x),z=e.util.escapeQuotes(x),V=m+I;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,x,e.opts.jsonPointers)),r+=" if ( "+V+" === undefined ",j&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(x)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { missingProperty: '"+z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=D}else v&&(r+=" if (true) {");return r}});var zs=U((du,js)=>{"use strict";js.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m="data"+(h||""),y="valid"+n,u=e.opts.$data&&o&&o.$data,p;if(u?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",p="schema"+n):p=o,(o||u)&&e.opts.uniqueItems!==!1){u&&(r+=" var "+y+"; if ("+p+" === false || "+p+" === undefined) "+y+" = true; else if (typeof "+p+" != 'boolean') "+y+" = false; else { "),r+=" var i = "+m+".length , "+y+" = true , j; if (i > 1) { ";var l=e.schema.items&&e.schema.items.type,i=Array.isArray(l);if(!l||l=="object"||l=="array"||i&&(l.indexOf("object")>=0||l.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+y+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var d="checkDataType"+(i?"s":"");r+=" if ("+e.util[d](l,"item",e.opts.strictNumbers,!0)+") continue; ",i&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+y+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",u&&(r+="  }  "),r+=" if (!"+y+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",u?r+="validate.schema"+E:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var _=r;r=b.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",v&&(r+=" else { ")}else v&&(r+=" if (true) { ");return r}});var Us=U((vu,qs)=>{"use strict";qs.exports={$ref:Xt(),allOf:es(),anyOf:as(),$comment:ss(),const:is(),contains:ls(),dependencies:fs(),enum:cs(),format:vs(),if:ps(),items:ys(),maximum:Pa(),minimum:Pa(),maxItems:Ea(),minItems:Ea(),maxLength:_a(),minLength:_a(),maxProperties:ba(),minProperties:ba(),multipleOf:ws(),not:$s(),oneOf:Cs(),pattern:Os(),properties:xs(),propertyNames:Ts(),required:Ns(),uniqueItems:zs(),validate:ga()}});var ks=U((mu,Ms)=>{"use strict";var Vs=Us(),Sa=Qe().toHash;Ms.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=Sa(t),e.types=Sa(r),e.forEach(function(n){n.rules=n.rules.map(function(h){var o;if(typeof h=="object"){var E=Object.keys(h)[0];o=h[E],h=E,o.forEach(function(v){t.push(v),e.all[v]=!0})}t.push(h);var P=e.all[h]={keyword:h,code:Vs[h],implements:o};return P}),e.all.$comment={keyword:"$comment",code:Vs.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=Sa(t.concat(s)),e.custom={},e}});var Bs=U((pu,Qs)=>{"use strict";var Hs=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Qs.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,n;for(n=1;n<s.length;n++)r=r[s[n]];for(n=0;n<Hs.length;n++){var h=Hs[n],o=r[h];o&&(r[h]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var Js=U((gu,Gs)=>{"use strict";var bo=Cr().MissingRef;Gs.exports=Ks;function Ks(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=n(a).then(function(){var o=s._addSchema(a,void 0,e);return o.validate||h(o)});return t&&r.then(function(o){t(null,o)},t),r;function n(o){var E=o.$schema;return E&&!s.getSchema(E)?Ks.call(s,{$ref:E},!0):Promise.resolve()}function h(o){try{return s._compile(o)}catch(P){if(P instanceof bo)return E(P);throw P}function E(P){var v=P.missingSchema;if(u(v))throw new Error("Schema "+v+" is loaded but "+P.missingRef+" cannot be resolved");var m=s._loadingSchemas[v];return m||(m=s._loadingSchemas[v]=s._opts.loadSchema(v),m.then(y,y)),m.then(function(p){if(!u(v))return n(p).then(function(){u(v)||s.addSchema(p,v,void 0,e)})}).then(function(){return h(o)});function y(){delete s._loadingSchemas[v]}function u(p){return s._refs[p]||s._schemas[p]}}}}});var Ys=U((yu,Ws)=>{"use strict";Ws.exports=function(e,t,s){var r=" ",n=e.level,h=e.dataLevel,o=e.schema[t],E=e.schemaPath+e.util.getProperty(t),P=e.errSchemaPath+"/"+t,v=!e.opts.allErrors,m,y="data"+(h||""),u="valid"+n,p="errs__"+n,l=e.opts.$data&&o&&o.$data,i;l?(r+=" var schema"+n+" = "+e.util.getData(o.$data,h,e.dataPathArr)+"; ",i="schema"+n):i=o;var d=this,b="definition"+n,_=d.definition,R="",$,D,L,j,A;if(l&&_.$data){A="keywordValidate"+n;var q=_.validateSchema;r+=" var "+b+" = RULES.custom['"+t+"'].definition; var "+A+" = "+b+".validate;"}else{if(j=e.useCustomRule(d,o,e.schema,e),!j)return;i="validate.schema"+E,A=j.code,$=_.compile,D=_.inline,L=_.macro}var z=A+".errors",N="i"+n,C="ruleErr"+n,O=_.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(D||L||(r+=""+z+" = null;"),r+="var "+p+" = errors;var "+u+";",l&&_.$data&&(R+="}",r+=" if ("+i+" === undefined) { "+u+" = true; } else { ",q&&(R+="}",r+=" "+u+" = "+b+".validateSchema("+i+"); if ("+u+") { ")),D)_.statements?r+=" "+j.validate+" ":r+=" "+u+" = "+j.validate+"; ";else if(L){var x=e.util.copy(e),R="";x.level++;var M="valid"+x.level;x.schema=j.validate,x.schemaPath="";var I=e.compositeRule;e.compositeRule=x.compositeRule=!0;var V=e.validate(x).replace(/validate\.schema/g,A);e.compositeRule=x.compositeRule=I,r+=" "+V}else{var k=k||[];k.push(r),r="",r+="  "+A+".call( ",e.opts.passContext?r+="this":r+="self",$||_.schema===!1?r+=" , "+y+" ":r+=" , "+i+" , "+y+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var F=h?"data"+(h-1||""):"parentData",J=h?e.dataPathArr[h]:"parentDataProperty";r+=" , "+F+" , "+J+" , rootData )  ";var he=r;r=k.pop(),_.errors===!1?(r+=" "+u+" = ",O&&(r+="await "),r+=""+he+"; "):O?(z="customErrors"+n,r+=" var "+z+" = null; try { "+u+" = await "+he+"; } catch (e) { "+u+" = false; if (e instanceof ValidationError) "+z+" = e.errors; else throw e; } "):r+=" "+z+" = null; "+u+" = "+he+"; "}if(_.modifying&&(r+=" if ("+F+") "+y+" = "+F+"["+J+"];"),r+=""+R,_.valid)v&&(r+=" if (true) { ");else{r+=" if ( ",_.valid===void 0?(r+=" !",L?r+=""+M:r+=""+u):r+=" "+!_.valid+" ",r+=") { ",m=d.keyword;var k=k||[];k.push(r),r="";var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { keyword: '"+d.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+d.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var de=r;r=k.pop(),!e.compositeRule&&v?e.async?r+=" throw new ValidationError(["+de+"]); ":r+=" validate.errors = ["+de+"]; return false; ":r+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var K=r;r=k.pop(),D?_.errors?_.errors!="full"&&(r+="  for (var "+N+"="+p+"; "+N+"<errors; "+N+"++) { var "+C+" = vErrors["+N+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+P+'"; } ',e.opts.verbose&&(r+=" "+C+".schema = "+i+"; "+C+".data = "+y+"; "),r+=" } "):_.errors===!1?r+=" "+K+" ":(r+=" if ("+p+" == errors) { "+K+" } else {  for (var "+N+"="+p+"; "+N+"<errors; "+N+"++) { var "+C+" = vErrors["+N+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+P+'"; } ',e.opts.verbose&&(r+=" "+C+".schema = "+i+"; "+C+".data = "+y+"; "),r+=" } } "):L?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(P)+" , params: { keyword: '"+d.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+d.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+E+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&v&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):_.errors===!1?r+=" "+K+" ":(r+=" if (Array.isArray("+z+")) { if (vErrors === null) vErrors = "+z+"; else vErrors = vErrors.concat("+z+"); errors = vErrors.length;  for (var "+N+"="+p+"; "+N+"<errors; "+N+"++) { var "+C+" = vErrors["+N+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+P+'";  ',e.opts.verbose&&(r+=" "+C+".schema = "+i+"; "+C+".data = "+y+"; "),r+=" } } else { "+K+" } "),r+=" } ",v&&(r+=" else { ")}return r}});var wa=U((Pu,So)=>{So.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var en=U((Eu,Zs)=>{"use strict";var Xs=wa();Zs.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Xs.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Xs.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var an=U((_u,rn)=>{"use strict";var wo=/^[a-z_$][a-z0-9_$-]*$/i,Ro=Ys(),$o=en();rn.exports={add:Do,get:Co,remove:Ao,validate:Ra};function Do(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!wo.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)h(a,s[r],e);else h(a,s,e);var n=e.metaSchema;n&&(e.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}t.keywords[a]=t.all[a]=!0;function h(o,E,P){for(var v,m=0;m<t.length;m++){var y=t[m];if(y.type==E){v=y;break}}v||(v={type:E,rules:[]},t.push(v));var u={keyword:o,definition:P,custom:!0,code:Ro,implements:P.implements};v.rules.push(u),t.custom[o]=u}return this}function Co(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Ao(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function Ra(a,e){Ra.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile($o,!0);if(t(a))return!0;if(Ra.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var tn=U((bu,Oo)=>{Oo.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var vn=U((Su,dn)=>{"use strict";var nn=Nt(),Be=Dr(),Fo=zt(),on=fa(),xo=pa(),Io=Wt(),To=ks(),ln=Bs(),un=Qe();dn.exports=se;se.prototype.validate=No;se.prototype.compile=jo;se.prototype.addSchema=zo;se.prototype.addMetaSchema=qo;se.prototype.validateSchema=Uo;se.prototype.getSchema=Mo;se.prototype.removeSchema=Ho;se.prototype.addFormat=Xo;se.prototype.errorsText=Yo;se.prototype._addSchema=Qo;se.prototype._compile=Bo;se.prototype.compileAsync=Js();var Nr=an();se.prototype.addKeyword=Nr.add;se.prototype.getKeyword=Nr.get;se.prototype.removeKeyword=Nr.remove;se.prototype.validateKeyword=Nr.validate;var fn=Cr();se.ValidationError=fn.Validation;se.MissingRefError=fn.MissingRef;se.$dataMetaSchema=ln;var Lr="http://json-schema.org/draft-07/schema",sn=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Lo=["/properties"];function se(a){if(!(this instanceof se))return new se(a);a=this._opts=un.copy(a)||{},sl(this),this._schemas={},this._refs={},this._fragments={},this._formats=Io(a.format),this._cache=a.cache||new Fo,this._loadingSchemas={},this._compilations=[],this.RULES=To(),this._getId=Ko(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=xo),this._metaOpts=tl(this),a.formats&&rl(this),a.keywords&&al(this),Zo(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),el(this)}function No(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function jo(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function zo(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var n=this._getId(a);if(n!==void 0&&typeof n!="string")throw new Error("schema id must be string");return e=Be.normalizeId(e||n),cn(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function qo(a,e,t){return this.addSchema(a,e,t,!0),this}function Uo(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||Vo(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function Vo(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Lr)?Lr:void 0,a._opts.defaultMeta}function Mo(a){var e=hn(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return ko(this,a)}}function ko(a,e){var t=Be.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,n=t.baseId,h=nn.call(a,s,r,void 0,n);return a._fragments[e]=new on({ref:e,fragment:!0,schema:s,root:r,baseId:n,validate:h}),h}}function hn(a,e){return e=Be.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function Ho(a){if(a instanceof RegExp)return Tr(this,this._schemas,a),Tr(this,this._refs,a),this;switch(typeof a){case"undefined":return Tr(this,this._schemas),Tr(this,this._refs),this._cache.clear(),this;case"string":var e=hn(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Be.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Tr(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function Qo(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,n=r?r(a):a,h=this._cache.get(n);if(h)return h;s=s||this._opts.addUsedSchema!==!1;var o=Be.normalizeId(this._getId(a));o&&s&&cn(this,o);var E=this._opts.validateSchema!==!1&&!e,P;E&&!(P=o&&o==Be.normalizeId(a.$schema))&&this.validateSchema(a,!0);var v=Be.ids.call(this,a),m=new on({id:o,schema:a,localRefs:v,cacheKey:n,meta:t});return o[0]!="#"&&s&&(this._refs[o]=m),this._cache.put(n,m),E&&P&&this.validateSchema(a,!0),m}function Bo(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=nn.call(this,a.schema,e,a.localRefs)}catch(n){throw delete a.validate,n}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var n=a.validate,h=n.apply(this,arguments);return r.errors=n.errors,h}}function Ko(a){switch(a.schemaId){case"auto":return Wo;case"id":return Go;default:return Jo}}function Go(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function Jo(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Wo(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Yo(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",n=0;n<a.length;n++){var h=a[n];h&&(r+=s+h.dataPath+" "+h.message+t)}return r.slice(0,-t.length)}function Xo(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Zo(a){var e;if(a._opts.$data&&(e=tn(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=wa();a._opts.$data&&(t=ln(t,Lo)),a.addMetaSchema(t,Lr,!0),a._refs["http://json-schema.org/schema"]=Lr}}function el(a){var e=a._opts.schemas;if(!!e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function rl(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function al(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function cn(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function tl(a){for(var e=un.copy(a._opts),t=0;t<sn.length;t++)delete e[sn[t]];return e}function sl(a){var e=a._opts.logger;if(e===!1)a.logger={log:$a,warn:$a,error:$a};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function $a(){}});var gn=U((zr,pn)=>{var Da=[].slice;(function(a,e){return typeof define=="function"&&define.amd!=null?define([],e):typeof zr<"u"&&zr!==null?pn.exports=e():a.UrlPattern=e()})(zr,function(){var a,e,t,s,r,n,h,o,E,P,v,m,y,u,p;return E=function(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},h=function(l,i){var d,b,_;for(_=[],d=-1,b=l.length;++d<b;)_=_.concat(i(l[d]));return _},u=function(l,i){var d,b,_;for(_="",d=-1,b=l.length;++d<b;)_+=i(l[d]);return _},y=function(l){return new RegExp(l.toString()+"|").exec("").length-1},v=function(l,i){var d,b,_,R,$;for(R={},d=-1,_=l.length;++d<_;)b=l[d],$=i[d],$!=null&&(R[b]!=null?(Array.isArray(R[b])||(R[b]=[R[b]]),R[b].push($)):R[b]=$);return R},a={},a.Result=function(l,i){this.value=l,this.rest=i},a.Tagged=function(l,i){this.tag=l,this.value=i},a.tag=function(l,i){return function(d){var b,_;if(b=i(d),b!=null)return _=new a.Tagged(l,b.value),new a.Result(_,b.rest)}},a.regex=function(l){return function(i){var d,b;if(d=l.exec(i),d!=null)return b=d[0],new a.Result(b,i.slice(b.length))}},a.sequence=function(){var l;return l=1<=arguments.length?Da.call(arguments,0):[],function(i){var d,b,_,R,$,D;for(d=-1,b=l.length,D=[],R=i;++d<b;){if(_=l[d],$=_(R),$==null)return;D.push($.value),R=$.rest}return new a.Result(D,R)}},a.pick=function(){var l,i;return l=arguments[0],i=2<=arguments.length?Da.call(arguments,1):[],function(d){var b,_;if(_=a.sequence.apply(a,i)(d),_!=null)return b=_.value,_.value=b[l],_}},a.string=function(l){var i;return i=l.length,function(d){if(d.slice(0,i)===l)return new a.Result(l,d.slice(i))}},a.lazy=function(l){var i;return i=null,function(d){return i==null&&(i=l()),i(d)}},a.baseMany=function(l,i,d,b,_){var R,$,D,L;for(D=_,L=d?"":[];!(i!=null&&(R=i(D),R!=null)||($=l(D),$==null));)d?L+=$.value:L.push($.value),D=$.rest;if(!(b&&L.length===0))return new a.Result(L,D)},a.many1=function(l){return function(i){return a.baseMany(l,null,!1,!0,i)}},a.concatMany1Till=function(l,i){return function(d){return a.baseMany(l,i,!0,!0,d)}},a.firstChoice=function(){var l;return l=1<=arguments.length?Da.call(arguments,0):[],function(i){var d,b,_,R;for(d=-1,b=l.length;++d<b;)if(_=l[d],R=_(i),R!=null)return R}},m=function(l){var i;return i={},i.wildcard=a.tag("wildcard",a.string(l.wildcardChar)),i.optional=a.tag("optional",a.pick(1,a.string(l.optionalSegmentStartChar),a.lazy(function(){return i.pattern}),a.string(l.optionalSegmentEndChar))),i.name=a.regex(new RegExp("^["+l.segmentNameCharset+"]+")),i.named=a.tag("named",a.pick(1,a.string(l.segmentNameStartChar),a.lazy(function(){return i.name}))),i.escapedChar=a.pick(1,a.string(l.escapeChar),a.regex(/^./)),i.static=a.tag("static",a.concatMany1Till(a.firstChoice(a.lazy(function(){return i.escapedChar}),a.regex(/^./)),a.firstChoice(a.string(l.segmentNameStartChar),a.string(l.optionalSegmentStartChar),a.string(l.optionalSegmentEndChar),i.wildcard))),i.token=a.lazy(function(){return a.firstChoice(i.wildcard,i.optional,i.named,i.static)}),i.pattern=a.many1(a.lazy(function(){return i.token})),i},o={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},n=function(l,i){if(Array.isArray(l))return u(l,function(d){return n(d,i)});switch(l.tag){case"wildcard":return"(.*?)";case"named":return"(["+i+"]+)";case"static":return E(l.value);case"optional":return"(?:"+n(l.value,i)+")?"}},r=function(l,i){return i==null&&(i=o.segmentValueCharset),"^"+n(l,i)+"$"},s=function(l){if(Array.isArray(l))return h(l,s);switch(l.tag){case"wildcard":return["_"];case"named":return[l.value];case"static":return[];case"optional":return s(l.value)}},P=function(l,i,d,b){var _,R,$,D;if(b==null&&(b=!1),D=l[i],D==null){if(b)throw new Error("no values provided for key `"+i+"`");return}if(_=d[i]||0,R=Array.isArray(D)?D.length-1:0,_>R){if(b)throw new Error("too few values provided for key `"+i+"`");return}return $=Array.isArray(D)?D[_]:D,b&&(d[i]=_+1),$},t=function(l,i,d){var b,_;if(Array.isArray(l)){for(b=-1,_=l.length;++b<_;)if(t(l[b],i,d))return!0;return!1}switch(l.tag){case"wildcard":return P(i,"_",d,!1)!=null;case"named":return P(i,l.value,d,!1)!=null;case"static":return!1;case"optional":return t(l.value,i,d)}},p=function(l,i,d){if(Array.isArray(l))return u(l,function(b){return p(b,i,d)});switch(l.tag){case"wildcard":return P(i,"_",d,!0);case"named":return P(i,l.value,d,!0);case"static":return l.value;case"optional":return t(l.value,i,d)?p(l.value,i,d):""}},e=function(l,i){var d,b,_,R,$;if(l instanceof e){this.isRegex=l.isRegex,this.regex=l.regex,this.ast=l.ast,this.names=l.names;return}if(this.isRegex=l instanceof RegExp,!(typeof l=="string"||this.isRegex))throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=l,i!=null){if(!Array.isArray(i))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(d=y(this.regex),i.length!==d)throw new Error("regex contains "+d+" groups but array of group names contains "+i.length);this.names=i}return}if(l==="")throw new Error("argument must not be the empty string");if($=l.replace(/\s+/g,""),$!==l)throw new Error("argument must not contain whitespace");if(b={escapeChar:i?.escapeChar||o.escapeChar,segmentNameStartChar:i?.segmentNameStartChar||o.segmentNameStartChar,segmentNameCharset:i?.segmentNameCharset||o.segmentNameCharset,segmentValueCharset:i?.segmentValueCharset||o.segmentValueCharset,optionalSegmentStartChar:i?.optionalSegmentStartChar||o.optionalSegmentStartChar,optionalSegmentEndChar:i?.optionalSegmentEndChar||o.optionalSegmentEndChar,wildcardChar:i?.wildcardChar||o.wildcardChar},R=m(b),_=R.pattern(l),_==null)throw new Error("couldn't parse pattern");if(_.rest!=="")throw new Error("could only partially parse pattern");this.ast=_.value,this.regex=new RegExp(r(this.ast,b.segmentValueCharset)),this.names=s(this.ast)},e.prototype.match=function(l){var i,d;return d=this.regex.exec(l),d==null?null:(i=d.slice(1),this.names?v(this.names,i):i)},e.prototype.stringify=function(l){if(l==null&&(l={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(l!==Object(l))throw new Error("argument must be an object or undefined");return p(this.ast,l,{})},e.escapeForRegex=E,e.concatMap=h,e.stringConcatMap=u,e.regexGroupCount=y,e.keysAndValuesToObject=v,e.P=a,e.newParser=m,e.defaultOptions=o,e.astNodeToRegexString=r,e.astNodeToNames=s,e.getParam=P,e.astNodeContainsSegmentsForProvidedParams=t,e.stringify=p,e})});var fl={};Hn(fl,{LogLevel:()=>Ee,Matcher:()=>ul,OutputUtils:()=>Kr,RouterType:()=>Ma,createRouter:()=>Jn,enforceGroupMembership:()=>Wn,getLogger:()=>Br,parseMultipartFormData:()=>Ri,validateBodyJSONVariables:()=>il,validateMultipartFormData:()=>ol,validateObject:()=>ll,validatePathVariables:()=>nl});module.exports=Qn(fl);var Ee=Object.freeze({ERROR:50,WARN:40,INFO:30,DEBUG:20,TRACE:10}),Bn=Ee.INFO,Qr=(a,e="")=>Object.keys(a).reduce((s,r)=>{let n=e.length?`${e}_`:"";return a[r]instanceof Error?s[`${n}${r}`]=a[r].toString():typeof a[r]=="object"?Object.assign(s,Qr(a[r],`${n}${r}`)):s[`${n}${r}`]=a[r],s},{}),Hr,Kn=a=>(Hr||(Hr={functionName:a.functionName,functionVersion:a.functionVersion,functionMemorySize:a.memoryLimitInMB,functionARN:a.invokedFunctionArn}),Hr),lr=(a,e,t,s)=>{let r={logLevel:a,timestamp:new Date().getTime(),functionRequestId:t.awsRequestId,isColdStart:!global.isWarmStart,...Kn(t)},n=process.env._X_AMZN_TRACE_ID;if(n&&(r.xrayTraceId=n),s&&typeof s=="object"){let h=Qr({message:s});r={...r,...h}}else if(typeof s=="string")try{let h=Qr({message:JSON.parse(s)});r={...r,...h}}catch{r.message=s}else throw new Error("Can only log objects and strings");return r},ur=()=>!process.env.LOG_LEVEL&&process.env.NODE_ENV==="development"?Ee.INFO:process.env.LOG_LEVEL?Number.parseInt(process.env.LOG_LEVEL,10):Bn,Br=(a,e)=>({trace:t=>{ur()<=Ee.TRACE&&console.trace(lr(Ee.TRACE,a,e,t))},debug:t=>{ur()<=Ee.DEBUG&&console.debug(lr(Ee.DEBUG,a,e,t))},info:t=>{ur()<=Ee.INFO&&console.info(lr(Ee.INFO,a,e,t))},warn:t=>{ur()<=Ee.WARN&&console.warn(lr(Ee.WARN,a,e,t))},error:t=>{ur()<=Ee.ERROR&&console.error(lr(Ee.ERROR,a,e,t))}});var Gn=(a,e)=>{let t={...e},s=typeof a!="string";return e["Content-Type"]||e["content-type"]||(s&&a?t["Content-Type"]="application/json":!s&&a&&(t["Content-Type"]="text/plain")),t},Va=(a,e=200,t={},s=[])=>{let r=Gn(a,t),n;return a&&(n=typeof a=="string"?a:JSON.stringify(a)),{statusCode:e,body:n,cookies:s,headers:r,isBase64Encoded:!1}};var Kr={HttpApiV2:Va};var Ma=Object.freeze({HTTP_API_V2:Symbol("httpApiV2")}),Jn=a=>{let e=[],t=(n,...h)=>{e.push({matcher:n,funcs:h})},s=(n,h,o={},E=[])=>{switch(a){case Ma.HTTP_API_V2:return Kr.HttpApiV2(n,h,o,E);default:throw new Error("Undefined router type")}};return{add:t,run:async(n,h)=>{let o=Object.freeze({output:s}),E={event:n,context:h,logger:Br(n,h)};E.addRequestData=(v,m)=>{if(Object.prototype.hasOwnProperty.call(E,v))throw new Error("Property already present on request object");E={...E,[v]:m}};let P=e.find(v=>v.matcher(E));if(!P)return s("Not found",404);for(let v=0;v<P.funcs.length;v+=1)try{let m=await P.funcs[v](E,o);if(m)return global.isWarmStart=!0,m}catch(m){return E.logger.error({error:m}),global.isWarmStart=!0,s("Internal server error",500)}return E.logger.error({message:"Function did not return data"}),global.isWarmStart=!0,s("Internal server error",500)}}};var Wn=a=>(e,t)=>{let s=a;Array.isArray(a)||(s=[a]);let{authorizer:r}=e.event.requestContext;if(!r)throw e.logger.error({message:"Authorizer data not present in event. Authorizer might be missing from route.",event:e.event}),new Error("Authorizer data not present in request");let n=r.jwt.claims["cognito:groups"];Array.isArray(n)||(n=n.replace(/['[\]]+/g,"").split(" "));let o=n.filter(E=>s.includes(E)).length>0;if(e.logger.info({requiredGroups:s,currentUserGroup:n,message:"Authentication Group Evaluation"}),!o)return t.output("Unauthorized",403)};var ct=kr(ht()),Ri=async a=>{let{event:e}=a,t={files:[],fields:{}},s={...a.headers};s["content-type"]=e.headers["content-type"]||e.headers["Content-Type"];let r=(0,ct.default)({headers:s});return new Promise((n,h)=>{let o=[];r.on("file",(P,v,m)=>{let{filename:y,encoding:u,mimeType:p}=m,l={};v.on("data",i=>{i&&i.length&&o.push(i)}),v.on("end",()=>{o.length&&(l.content=Buffer.concat(o),l.fileName=y,l.contentType=p,l.encoding=u,l.fieldName=P,t.files.push(l))})}),r.on("field",(P,v)=>{t.fields[P]=v}),r.on("error",P=>{h(P)}),r.on("close",()=>{a.addRequestData("formData",t),n()});let E=e.encoding||(e.isBase64Encoded?"base64":"binary");r.write(e.body,E),r.end()})};var mn=kr(vn()),jr=new mn.default,nl=a=>{let e=jr.compile(a);return(t,s)=>{if(!e(t.pathVariables))return s.output({Errors:e.errors},400)}},il=a=>{let e=jr.compile(a);return(t,s)=>{let r;try{r=JSON.parse(t.event.body)}catch{return t.logger.error({message:"Cannot parse body as JSON",body:t.event.body}),s.output({Error:"Cannot parse body as JSON"},400)}if(!e(r))return s.output({Errors:e.errors},400)}},ol=a=>{let e=jr.compile(a);return(t,s)=>{if(!e(t.formData))return s.output({Errors:e.errors},400)}},ll=(a,e)=>{let t=jr.compile(a);return{isValid:t(e),errors:t.errors}};var yn=kr(gn()),Pn=(a,e)=>t=>{let{event:s}=t;if(!s.requestContext||!s.requestContext.http)return!1;let r=s.requestContext.http,{method:n,path:h}=r;if(a.toLowerCase()!==n.toLowerCase())return!1;let E=new yn.default(e).match(h);return E?(t.addRequestData("pathVariables",E),!0):!1};var ul={HttpApiV2:Pn};0&&(module.exports={LogLevel,Matcher,OutputUtils,RouterType,createRouter,enforceGroupMembership,getLogger,parseMultipartFormData,validateBodyJSONVariables,validateMultipartFormData,validateObject,validatePathVariables});
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
